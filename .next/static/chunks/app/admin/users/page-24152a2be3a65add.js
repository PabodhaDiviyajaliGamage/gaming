(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{291:function(e,s,t){Promise.resolve().then(t.bind(t,6846))},6846:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=t(7437),a=t(2265),l=t(2617);function d(){let[e,s]=(0,a.useState)([]),[t,d]=(0,a.useState)(!1),[n,o]=(0,a.useState)(null),[c,i]=(0,a.useState)(!0),[u,x]=(0,a.useState)({name:"",email:"",phone:"",password:"",role:"user",status:"active"});(0,a.useEffect)(()=>{m()},[]);let m=async()=>{try{i(!0);let e=await l.h3.getAll();e.success?s(e.data||[]):console.error("Failed to load users:",e.error)}catch(e){console.error("Error loading users:",e)}finally{i(!1)}},p=e=>{o(e),x({...e,password:""}),d(!0)},h=async t=>{if(confirm("Are you sure you want to delete this user?"))try{(await l.h3.delete(t)).success?(s(e.filter(e=>(e._id||e.id)!==t)),alert("User deleted successfully!")):alert("Failed to delete user")}catch(e){console.error("Error deleting user:",e),alert("Failed to delete user")}},g=async t=>{t.preventDefault();try{if(n){let t={...u};t.password||delete t.password;let r=await l.h3.update(n._id||n.id,t);r.success?(s(e.map(e=>(e._id||e.id)===(n._id||n.id)?r.data:e)),alert("User updated successfully!")):alert("Failed to update user")}else{if(!u.password){alert("Password is required for new users");return}let t=await l.h3.register(u);t.success?(s([...e,t.data]),alert("User added successfully!")):alert(t.error||"Failed to add user")}d(!1)}catch(e){console.error("Error saving user:",e),alert("Failed to save user")}};return(0,r.jsxs)("div",{className:"text-white",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Users Management"}),(0,r.jsx)("button",{onClick:()=>{o(null),x({name:"",email:"",phone:"",password:"",role:"user",status:"active"}),d(!0)},className:"px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-semibold transition",children:"+ Add New User"})]}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Name"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Email"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Phone"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Role"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Joined"}),(0,r.jsx)("th",{className:"px-4 py-3 text-left",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:c?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-400",children:"Loading users..."})}):0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-400",children:'No users found. Click "Add New User" to create one.'})}):e.map(e=>(0,r.jsxs)("tr",{className:"border-t border-gray-700 hover:bg-gray-750",children:[(0,r.jsx)("td",{className:"px-4 py-3 font-semibold",children:e.name}),(0,r.jsx)("td",{className:"px-4 py-3",children:e.email}),(0,r.jsx)("td",{className:"px-4 py-3",children:e.phone}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("admin"===e.role?"bg-purple-500":"bg-blue-500"),children:e.role.toUpperCase()})}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("active"===e.status?"bg-green-500":"bg-red-500"),children:e.status.toUpperCase()})}),(0,r.jsx)("td",{className:"px-4 py-3 text-sm text-gray-400",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"}),(0,r.jsxs)("td",{className:"px-4 py-3",children:[(0,r.jsx)("button",{onClick:()=>p(e),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 rounded mr-2 text-sm transition",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>h(e._id||e.id),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-sm transition",children:"Delete"})]})]},e._id||e.id))})]})})}),t&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-gray-800 rounded-xl max-w-md w-full p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:n?"Edit User":"Add New User"}),(0,r.jsxs)("form",{onSubmit:g,children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Full Name *"}),(0,r.jsx)("input",{type:"text",value:u.name,onChange:e=>x({...u,name:e.target.value}),className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Email *"}),(0,r.jsx)("input",{type:"email",value:u.email,onChange:e=>x({...u,email:e.target.value}),className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Phone *"}),(0,r.jsx)("input",{type:"text",value:u.phone,onChange:e=>x({...u,phone:e.target.value}),className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium mb-1",children:["Password ",n?"(leave blank to keep current)":"*"]}),(0,r.jsx)("input",{type:"password",value:u.password,onChange:e=>x({...u,password:e.target.value}),className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600",required:!n,placeholder:n?"Leave blank to keep current password":"Enter password"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Role *"}),(0,r.jsxs)("select",{value:u.role,onChange:e=>x({...u,role:e.target.value}),className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600",required:!0,children:[(0,r.jsx)("option",{value:"user",children:"User"}),(0,r.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Status *"}),(0,r.jsxs)("select",{value:u.status,onChange:e=>x({...u,status:e.target.value}),className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600",required:!0,children:[(0,r.jsx)("option",{value:"active",children:"Active"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive"}),(0,r.jsx)("option",{value:"suspended",children:"Suspended"})]})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,r.jsx)("button",{type:"submit",className:"flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-semibold transition",children:n?"Update":"Add"}),(0,r.jsx)("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-semibold transition",children:"Cancel"})]})]})]})})]})}},2617:function(e,s,t){"use strict";async function r(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=await fetch("".concat("/api").concat(e),{headers:{"Content-Type":"application/json",...s.headers},...s}),r=await t.json();if(!t.ok)throw Error(r.error||"API request failed");return r}t.d(s,{Pc:function(){return l},_W:function(){return a},g3:function(){return d},h3:function(){return n}});let a={getAll:()=>r("/games"),getById:e=>r("/games/".concat(e)),create:e=>r("/games",{method:"POST",body:JSON.stringify(e)}),update:(e,s)=>r("/games/".concat(e),{method:"PUT",body:JSON.stringify(s)}),delete:e=>r("/games/".concat(e),{method:"DELETE"})},l={getAll:()=>r("/packages"),getById:e=>r("/packages/".concat(e)),create:e=>r("/packages",{method:"POST",body:JSON.stringify(e)}),update:(e,s)=>r("/packages/".concat(e),{method:"PUT",body:JSON.stringify(s)}),delete:e=>r("/packages/".concat(e),{method:"DELETE"})},d={getAll:()=>r("/orders"),getById:e=>r("/orders/".concat(e)),create:e=>r("/orders",{method:"POST",body:JSON.stringify(e)}),update:(e,s)=>r("/orders/".concat(e),{method:"PUT",body:JSON.stringify(s)}),delete:e=>r("/orders/".concat(e),{method:"DELETE"})},n={getAll:()=>r("/users"),register:e=>r("/users",{method:"POST",body:JSON.stringify(e)}),update:(e,s)=>r("/users/".concat(e),{method:"PUT",body:JSON.stringify(s)}),delete:e=>r("/users/".concat(e),{method:"DELETE"}),login:e=>r("/auth/login",{method:"POST",body:JSON.stringify(e)})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=291)}),_N_E=e.O()}]);