(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[88],{8353:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/TopUp/CheckoutPage",function(){return t(1123)}])},1123:function(e,a,t){"use strict";t.r(a);var s=t(5893),r=t(7294),n=t(1379),o=t(7066),l=t(8808),c=t(2603),i=t(2280),d=t(8959),m=t(6729),p=t(8930),u=t(4899),g=t(2771),h=t(1606);let x=e=>/^[0-9a-fA-F]{24}$/.test(e);a.default=function(){var e;let[a,t]=(0,r.useState)(null),[b,f]=(0,r.useState)(!1),[N,y]=(0,r.useState)(!1),[D,j]=(0,r.useState)((0,u.jl)()),[v,w]=(0,r.useState)([]),[k,E]=(0,r.useState)(null),[S,I]=(0,r.useState)(null),[R,O]=(0,r.useState)("bank"),P=(0,n.s0)(),A=(0,n.TH)();return(0,r.useEffect)(()=>{if((0,p.WQ)(),w((0,p.sr)()),(0,u.jl)()){let e=(0,u.n5)();I(e),console.log("Current logged-in user ID:",e)}else P("/auth/login",{state:{from:A.pathname}});A.state&&A.state.orderDetails&&t(A.state.orderDetails)},[A,P]),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,s.jsx)(i.Z,{}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-center mb-8",children:"Complete Your Payment"}),a&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"Order Summary"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Game:"}),(0,s.jsx)("p",{className:"font-medium",children:a.gameName}),(0,s.jsx)("p",{className:"text-gray-600 mt-4 mb-2",children:"User ID:"}),S?(0,s.jsx)("p",{className:"font-medium bg-purple-50 p-2 rounded border-l-4 border-purple-500",children:S}):(0,s.jsx)("p",{className:"font-medium text-gray-500 bg-gray-50 p-2 rounded border-l-4 border-gray-400",children:"Not available"}),(0,s.jsx)("p",{className:"text-gray-600 mt-4 mb-2",children:"Player ID:"}),a.playerId&&""!==a.playerId.trim()?(0,s.jsx)("p",{className:"font-medium bg-blue-50 p-2 rounded border-l-4 border-blue-500",children:a.playerId}):(0,s.jsx)("p",{className:"font-medium text-red-500 bg-red-50 p-2 rounded border-l-4 border-red-500",children:"Not provided - Please go back and enter your Player ID"}),(0,s.jsx)("p",{className:"text-gray-600 mt-4 mb-2",children:"Username:"}),a.username&&""!==a.username.trim()?(0,s.jsx)("p",{className:"font-medium bg-blue-50 p-2 rounded border-l-4 border-blue-500",children:a.username}):(0,s.jsx)("p",{className:"font-medium text-yellow-500 bg-yellow-50 p-2 rounded border-l-4 border-yellow-500",children:"Not provided"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Package:"}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-orange-300 rounded-full flex items-center justify-center mr-2",children:(0,s.jsx)("span",{className:"text-lg font-bold text-blue-900",children:"\uD83D\uDC8E"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:a.packageName}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:a.packageDescription})]})]}),(0,s.jsx)("p",{className:"text-gray-600 mt-4 mb-2",children:"Amount:"}),(0,s.jsx)("p",{className:"font-bold text-xl text-green-600",children:a.packagePrice})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"Payment Instructions"}),(0,s.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:[(0,s.jsx)("p",{className:"text-blue-700",children:"Please transfer the exact amount using your preferred payment method and upload your payment slip."}),(0,s.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"bg-white rounded p-2 shadow-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Amount to Pay:"}),(0,s.jsx)("span",{className:"text-green-600 font-bold ml-2",children:(null==a?void 0:a.packagePrice)||"0.00"})]}),(0,s.jsxs)("div",{className:"bg-white rounded p-2 shadow-sm",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Reference:"}),(0,s.jsxs)("span",{className:"text-blue-600 font-mono ml-2",children:["SL-",(null==a?void 0:null===(e=a.playerId)||void 0===e?void 0:e.substring(0,6))||"GAMING"]})]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Select Payment Method"}),(0,s.jsxs)("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>O("bank"),className:"flex-1 py-3 px-4 flex items-center justify-center ".concat("bank"===R?"bg-blue-100 border-b-2 border-blue-500 text-blue-800":"bg-white text-gray-600 hover:bg-gray-50"),children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,s.jsx)("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]}),(0,s.jsxs)("span",{className:"flex flex-col items-start",children:[(0,s.jsx)("span",{children:"Bank Transfer"}),(0,s.jsx)("span",{className:"text-xs text-blue-600 font-light",children:"Standard processing"})]})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>O("ezcash"),className:"flex-1 py-3 px-4 flex items-center justify-center relative ".concat("ezcash"===R?"bg-green-100 border-b-2 border-green-500 text-green-800":"bg-white text-gray-600 hover:bg-gray-50"),children:[(0,s.jsx)("span",{className:"absolute -top-2 right-2 bg-green-500 text-white text-xs px-2 py-0.5 rounded-full font-medium shadow-sm",children:"Recommended"}),(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M17.498 14.382c-.301-.15-1.767-.867-2.04-.966-.273-.101-.473-.15-.673.15-.197.295-.771.964-.944 1.162-.175.195-.349.21-.646.075-.3-.15-1.263-.465-2.403-1.485-.888-.795-1.484-1.77-1.66-2.07-.174-.3-.019-.465.13-.615.136-.135.301-.345.451-.523.146-.181.194-.301.297-.496.1-.21.049-.375-.025-.524-.075-.15-.672-1.62-.922-2.206-.24-.584-.487-.51-.672-.51-.172-.015-.371-.015-.571-.015-.2 0-.523.074-.797.359-.273.3-1.045 1.02-1.045 2.475s1.07 2.865 1.219 3.075c.149.195 2.105 3.195 5.1 4.485.714.3 1.27.48 1.704.629.714.227 1.365.195 1.88.121.574-.091 1.767-.721 2.016-1.426.255-.705.255-1.29.18-1.425-.074-.135-.27-.21-.57-.345m-5.446 7.443h-.016c-1.77 0-3.524-.48-5.055-1.38l-.36-.214-3.75.975 1.005-3.645-.239-.375c-.99-1.576-1.516-3.391-1.516-5.26 0-5.445 4.455-9.885 9.942-9.885 2.654 0 5.145 1.035 7.021 2.91 1.875 1.859 2.909 4.35 2.909 6.99-.004 5.444-4.46 9.885-9.935 9.885M20.52 3.449C18.24 1.245 15.24 0 12.045 0 5.463 0 .104 5.334.101 11.893c0 2.096.549 4.14 1.595 5.945L0 24l6.335-1.652c1.746.943 3.71 1.444 5.71 1.447h.006c6.585 0 11.946-5.336 11.949-11.896 0-3.176-1.24-6.165-3.495-8.411"})}),(0,s.jsxs)("span",{className:"flex flex-col items-start",children:[(0,s.jsx)("span",{children:"eZcash"}),(0,s.jsx)("span",{className:"text-xs text-green-600 font-light",children:"Fast processing"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6 border border-blue-100",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:"bank"===R?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,s.jsx)("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]}),"Bank Account Information"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M17.498 14.382c-.301-.15-1.767-.867-2.04-.966-.273-.101-.473-.15-.673.15-.197.295-.771.964-.944 1.162-.175.195-.349.21-.646.075-.3-.15-1.263-.465-2.403-1.485-.888-.795-1.484-1.77-1.66-2.07-.174-.3-.019-.465.13-.615.136-.135.301-.345.451-.523.146-.181.194-.301.297-.496.1-.21.049-.375-.025-.524-.075-.15-.672-1.62-.922-2.206-.24-.584-.487-.51-.672-.51-.172-.015-.371-.015-.571-.015-.2 0-.523.074-.797.359-.273.3-1.045 1.02-1.045 2.475s1.07 2.865 1.219 3.075c.149.195 2.105 3.195 5.1 4.485.714.3 1.27.48 1.704.629.714.227 1.365.195 1.88.121.574-.091 1.767-.721 2.016-1.426.255-.705.255-1.29.18-1.425-.074-.135-.27-.21-.57-.345m-5.446 7.443h-.016c-1.77 0-3.524-.48-5.055-1.38l-.36-.214-3.75.975 1.005-3.645-.239-.375c-.99-1.576-1.516-3.391-1.516-5.26 0-5.445 4.455-9.885 9.942-9.885 2.654 0 5.145 1.035 7.021 2.91 1.875 1.859 2.909 4.35 2.909 6.99-.004 5.444-4.46 9.885-9.935 9.885M20.52 3.449C18.24 1.245 15.24 0 12.045 0 5.463 0 .104 5.334.101 11.893c0 2.096.549 4.14 1.595 5.945L0 24l6.335-1.652c1.746.943 3.71 1.444 5.71 1.447h.006c6.585 0 11.946-5.336 11.949-11.896 0-3.176-1.24-6.165-3.495-8.411"})}),"eZcash Information"]})}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"bank"===R?"Please transfer the exact amount to one of the following bank accounts and upload the payment slip to complete your order.":"Please send the exact amount to one of the following eZcash numbers and upload a screenshot of the payment to complete your order."}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4",children:(0,s.jsx)(m.Z,{bankAccounts:v,theme:"light",className:"mt-2",paymentType:R})}),(0,s.jsx)("div",{className:"mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-4 text-sm",children:(0,s.jsxs)("p",{className:"text-yellow-700",children:[(0,s.jsx)("strong",{children:"Important:"})," ","bank"===R?"Please include your Player ID as the reference when making the bank transfer.":"Please mention your Player ID in the eZcash payment message or note."," This will help us identify your payment quickly."]})}),(0,s.jsxs)("div",{className:"mt-4 bg-yellow-100 border border-yellow-300 rounded-lg p-4 text-sm",children:[(0,s.jsx)("h4",{className:"font-bold text-yellow-800 mb-2",children:"මුදල් ගෙවීමේ උපදෙස්"}),(0,s.jsx)("ul",{className:"space-y-2 text-yellow-800",children:"bank"===R?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"නිවැරදි ගිණුම් තොරතුරු වලට අදාල මුදල බැර කරන්න"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"අද දිනයේ මුදල් ගෙවීම් සදහා පමණක් top-up ලබා ගත හැක"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"මුදල් දැමීමේදී රිසිට් 2 ක් ඇත්නම් 2 ම එක image එකකින් පහලින් uplode කරන්න"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"කිහිපවරක් එකම රිසිට් පත එවීමෙන් ඔබව web side එකෙන් banned වනු ඇත"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"නිවැරදි eZcash අංකයට මුදල් යොමු කරන්න"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"ගෙවීම් කරන විට ඔබේ Player ID සඳහන් කරන්න"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"අද දිනයේ මුදල් ගෙවීම් සදහා පමණක් top-up ලබා ගත හැක"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"ගෙවීම් සිදු කල පසු ඔබට ලැබෙන SMS එක හෝ ගෙවීම් තහවුරුව screenshot කර upload කරන්න"})]}),(0,s.jsxs)("li",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"mr-2",children:"•"}),(0,s.jsx)("span",{children:"කිහිපවරක් එකම ගෙවීම් තහවුරුව එවීමෙන් ඔබව web side එකෙන් banned වනු ඇත"})]})]})})]})]}),N?(0,s.jsxs)("div",{className:"mt-6 p-6 bg-green-50 border border-green-200 rounded-lg text-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-green-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("h3",{className:"text-xl font-medium text-green-800 mb-2",children:"Order Placed Successfully!"}),(0,s.jsxs)("p",{className:"text-green-600",children:["Your order has been recorded and ","bank"===R?"bank slip":"eZcash payment proof"," received."]}),(0,s.jsxs)("p",{className:"text-green-700 mt-3",children:["Your game credits will be added to your account ","bank"===R?"within 1 business day":"typically within 2-3 hours"," after payment verification."]}),"ezcash"===R&&(0,s.jsxs)("p",{className:"text-green-700 mt-2",children:[(0,s.jsx)("span",{className:"font-semibold",children:"eZcash Support:"})," For payment issues, contact customer service at 0773043667."]}),(0,s.jsx)("p",{className:"text-green-600 mt-3",children:"Redirecting to home page..."})]}):(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),console.log("ORDER DEBUG - Form submission started"),!k){alert("Please upload your ".concat("bank"===R?"bank slip":"eZcash payment screenshot"," to complete the order."));return}f(!0),console.log("ORDER DEBUG - Starting file reader");let t=new FileReader;t.onerror=function(e){console.error("ORDER DEBUG - FileReader error:",e),f(!1),alert("Error reading the uploaded file. Please try again with a different file.")},t.onload=function(e){console.log("ORDER DEBUG - File successfully read");let t=e.target.result,s="ORD-".concat(Date.now().toString().slice(-6)),r={orderId:s,orderNumber:s,game:(null==a?void 0:a.gameName)||"",userId:S||"",playerName:(null==a?void 0:a.username)||"",playerId:(null==a?void 0:a.playerId)||"",packageId:(null==a?void 0:a.packageId)||"",packageName:(null==a?void 0:a.packageName)||"",quantity:1,totalPrice:n(null==a?void 0:a.packagePrice)||0,date:(null==a?void 0:a.date)||new Date().toISOString(),receipt:t,paymentMethod:R,status:"pending"};function n(e){if(!e)return 0;if("string"==typeof e){let a=e.replace(/[^\d.]/g,""),t=parseFloat(a);return t<1&&a.length>=3?1e3*t:t}return parseFloat(e)||0}console.log("ORDER DEBUG - Preparing to save order:",r);try{let e=JSON.parse(localStorage.getItem("completedOrders")||"[]");localStorage.setItem("completedOrders",JSON.stringify([...e,r])),console.log("ORDER DEBUG - Order saved to localStorage successfully")}catch(e){console.error("ORDER DEBUG - Failed to save order to localStorage:",e)}let i=[],d={...a,orderNumber:s,receiptImage:!0,gameName:(null==a?void 0:a.gameName)||"",game:(null==a?void 0:a.gameName)||"",packageName:(null==a?void 0:a.packageName)||"",packagePrice:(null==a?void 0:a.packagePrice)||"",totalPrice:n(null==a?void 0:a.packagePrice)||0,userId:S||"",playerId:(null==a?void 0:a.playerId)||"",username:(null==a?void 0:a.username)||"",playerName:(null==a?void 0:a.username)||""},m=localStorage.getItem("token");if(m){x(r.userId)||console.warn("ORDER DEBUG - Invalid user ID format for MongoDB:",r.userId),x(r.packageId)||console.warn("ORDER DEBUG - Invalid package ID format for MongoDB:",r.packageId);let e=S&&x(S)?S:"650420d6359fa3cf64d98d4e",a=x(r.packageId)?r.packageId:"65041bb3359fa3cf64d98d4c",t=new FormData;if(t.append("userId",e),t.append("playerName",r.playerName||"Guest User"),t.append("playerId",r.playerId||"Guest ID"),t.append("packageId",a),t.append("quantity",1),t.append("totalPrice",r.totalPrice),t.append("paymentMethod",R),t.append("status","pending"),r.receipt&&r.receipt.startsWith("data:")){let e=r.receipt.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/);if(e&&3===e.length){let a=e[1],s=atob(e[2]),r=[];for(let e=0;e<s.length;e+=512){let a=s.slice(e,e+512),t=Array(a.length);for(let e=0;e<a.length;e++)t[e]=a.charCodeAt(e);r.push(new Uint8Array(t))}let n=new File([new Blob(r,{type:a})],"receipt.jpg",{type:a});t.append("recipt",n)}else console.error("ORDER DEBUG - Failed to parse data URL"),t.append("recipt","Data URL parsing failed")}else k?t.append("recipt",k):t.append("recipt","No receipt provided");i.push(o.Z.post((0,l.kG)(c.Hz.ENDPOINTS.ORDERS),t,{headers:{Authorization:"Bearer ".concat(m)}}).then(e=>{if(console.log("ORDER DEBUG - Order saved to MongoDB successfully:",e.data),e.data&&e.data._id){let a={...r,mongoDbId:e.data._id},t=[...JSON.parse(localStorage.getItem("completedOrders")||"[]").filter(e=>e.orderId!==a.orderId),a];localStorage.setItem("completedOrders",JSON.stringify(t))}return{type:"mongoDbSave",success:!0}}).catch(e=>{if(console.error("ORDER DEBUG - Failed to save order to MongoDB:",e),e.response){console.error("ORDER DEBUG - Server response data:",e.response.data),console.error("ORDER DEBUG - Server response status:",e.response.status),console.error("ORDER DEBUG - Server response headers:",e.response.headers);let a=e.response.data.message||"Unknown server error";alert("MongoDB save error: ".concat(a,". Order saved to local storage as backup."))}else e.request?(console.error("ORDER DEBUG - No response received:",e.request),alert("Could not reach the server. Order saved to local storage as backup.")):(console.error("ORDER DEBUG - Error message:",e.message),alert("Error: ".concat(e.message,". Order saved to local storage as backup.")));return{type:"mongoDbSave",success:!1,error:e}}))}else console.error("ORDER DEBUG - No authentication token found");i.push((0,g.it)(d).catch(e=>(console.error("EMAIL DEBUG - Failed to send admin email:",e),{type:"adminEmail",success:!1,error:e}))),i.push((0,h.Mp)(d).catch(e=>(console.error("WHATSAPP DEBUG - Failed to send admin WhatsApp:",e),{type:"adminWhatsapp",success:!1,error:e}))),console.log("ORDER DEBUG - All promises created, calling Promise.all with",i.length,"promises"),Promise.all(i).then(e=>{console.log("ORDER DEBUG - All promises resolved:",e);let a=e.find(e=>e&&"mongoDbSave"===e.type);a&&a.success?console.log("ORDER DEBUG - MongoDB save was successful"):console.warn("ORDER DEBUG - MongoDB save failed, but continuing with localStorage backup"),f(!1),y(!0),setTimeout(()=>{P("/")},5e3)}).catch(e=>{console.error("ORDER DEBUG - Error in promise handling:",e),f(!1),y(!0),setTimeout(()=>{P("/")},5e3)})};try{t.readAsDataURL(k)}catch(e){console.error("ORDER DEBUG - Error reading file:",e),f(!1),alert("Error reading the uploaded file. Please try again with a different file.")}},className:"mt-6",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-700 mb-4",children:"Payment Confirmation"}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{htmlFor:"payment-slip",className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload ","bank"===R?"Bank":"eZcash"," Payment Slip"]}),(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-6 text-center ".concat("bank"===R?"border-blue-300":"border-green-300"),children:[(0,s.jsx)("input",{type:"file",id:"payment-slip",accept:"image/*,.pdf",onChange:e=>{E(e.target.files[0])},className:"hidden"}),(0,s.jsx)("label",{htmlFor:"payment-slip",className:"cursor-pointer block",children:(0,s.jsxs)("div",{className:"text-center",children:["bank"===R?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}):(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Click to select ","bank"===R?"bank slip":"eZcash screenshot"," or drag and drop"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"})]})}),k&&(0,s.jsxs)("div",{className:"mt-4 p-3 rounded-lg flex items-center ".concat("bank"===R?"bg-blue-50":"bg-green-50"),children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 ".concat("bank"===R?"text-blue-500":"text-green-500"),viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})}),(0,s.jsx)("span",{className:"text-sm ".concat("bank"===R?"text-blue-700":"text-green-700"),children:k.name})]})]}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"bank"===R?"Please upload a screenshot or photo of your bank transfer receipt.":"Please upload a screenshot of your eZcash transaction or confirmation message."})]}),(0,s.jsxs)("div",{className:"".concat("bank"===R?"bg-blue-50 border-l-4 border-blue-500":"bg-green-50 border-l-4 border-green-500"," p-4 mb-6"),children:[(0,s.jsxs)("p",{className:"".concat("bank"===R?"text-blue-700":"text-green-700"," text-sm"),children:[(0,s.jsx)("strong",{children:"Important:"})," ","bank"===R?"Please ensure your bank reference number is visible in the payment slip to speed up verification.":"Please ensure the eZcash transaction number and timestamp are visible in the screenshot."]}),!1]}),(0,s.jsx)("div",{className:"flex justify-center mt-6",children:(0,s.jsx)("button",{type:"submit",disabled:!k||b,className:"".concat(!k||b?"bg-gray-400 cursor-not-allowed":"bank"===R?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"," text-white font-bold py-3 px-8 rounded-lg transition-colors flex items-center justify-center"),children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Complete Order with ".concat("bank"===R?"Bank Transfer":"eZcash")})})]})]})]}),(0,s.jsx)(d.Z,{})]})}},2771:function(e,a,t){"use strict";t.d(a,{Cz:function(){return s},it:function(){return r}});let s=e=>new Promise((a,t)=>{try{if(!e.to||!e.subject||!e.body){let a=Error("Missing required email fields (to, subject, body)");throw console.error("Email validation failed:",a,e),a}console.log("EMAIL DEBUG - Sending email to:",e.to),console.log("EMAIL DEBUG - Subject:",e.subject),console.log("EMAIL DEBUG - Body length:",e.body.length,"characters");try{let a=JSON.parse(localStorage.getItem("sentEmails")||"[]");a.push({to:e.to,subject:e.subject,from:e.from||"system@16.170.236.106",timestamp:new Date().toISOString(),status:"sent"}),localStorage.setItem("sentEmails",JSON.stringify(a)),console.log("EMAIL DEBUG - Saved to localStorage successfully")}catch(e){console.error("EMAIL DEBUG - Failed to save to localStorage:",e)}setTimeout(()=>{console.log("EMAIL DEBUG - Email sent successfully to:",e.to),a({success:!0,message:"Email sent successfully"})},1e3)}catch(e){console.error("Email sending failed:",e),t(e)}}),r=e=>{console.log("EMAIL DEBUG - sendOrderNotificationToAdmin called"),console.log("EMAIL DEBUG - Order details:",JSON.stringify(e));let a="admin@16.170.236.106",t="New Order Received - ".concat(e.orderNumber||e.orderId||"New Order"),r='\n    <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">\n      <div style="background-color: #0e08ab; color: white; padding: 20px; text-align: center;">\n        <h1 style="margin: 0;">New Order Received</h1>\n      </div>\n      \n      <div style="padding: 20px; border: 1px solid #ddd; background-color: #f9f9f9;">\n        <p>A new order has been received and is ready for processing:</p>\n        \n        <div style="background-color: #fff; border: 1px solid #eee; padding: 15px; margin: 15px 0;">\n          <h2 style="margin-top: 0; color: #0e08ab;">Order Details</h2>\n          <p><strong>Order Number:</strong> '.concat(e.orderNumber||e.orderId||"New Order","</p>\n          <p><strong>Date:</strong> ").concat(new Date().toLocaleString(),"</p>\n          <p><strong>Game:</strong> ").concat(e.gameName||e.game||"","</p>\n          <p><strong>Package:</strong> ").concat(e.packageName||"","</p>\n          <p><strong>Amount:</strong> ").concat(e.packagePrice||e.totalPrice||"","</p>\n          <p><strong>Game ID:</strong> ").concat(e.userId||"","</p>\n          <p><strong>Username:</strong> ").concat(e.username||e.playerName||"","</p>\n          \n          ").concat(e.receiptImage?"<p><strong>Payment Receipt:</strong> Uploaded</p>":"","\n          \n          <p><strong>Customer Email:</strong> ").concat(e.email||"Not provided",'</p>\n          <p><strong>Status:</strong> <span style="color: orange; font-weight: bold;">Pending</span></p>\n        </div>\n        \n        <p>Please log in to the admin dashboard to process this order.</p>\n      </div>\n      \n      <div style="padding: 20px; text-align: center; font-size: 12px; color: #777;">\n        <p>This is an automated notification from the SL Gaming Hub system.</p>\n        <p>&copy; ').concat(new Date().getFullYear()," SL Gaming Hub. All rights reserved.</p>\n      </div>\n    </div>\n  ");return console.log("EMAIL DEBUG - Prepared admin email to:",a),s({to:a,subject:t,body:r,from:"system@16.170.236.106"})}},8930:function(e,a,t){"use strict";t.d(a,{AG:function(){return l},I2:function(){return c},WQ:function(){return r},qH:function(){return o},sr:function(){return n}});let s=()=>{localStorage.getItem("bankData")||localStorage.setItem("bankData",JSON.stringify([]))},r=()=>{if(s(),0===n().length){let e=[{_id:"1",accountHolder:"K.W.A.Rasanga",accountNumber:"86800581",bankName:"Bank of Ceylon",branch:"Katuwana Branch",paymentType:"bank",createdAt:new Date().toISOString()},{_id:"2",accountHolder:"K.W.A.Rasanga",accountNumber:"115857695088",bankName:"Sampath Bank",branch:"Middeniya Branch",paymentType:"bank",createdAt:new Date().toISOString()},{_id:"3",accountHolder:"K.W.A.Rasanga",accountNumber:"0773043667",bankName:"eZcash",branch:"Mobile",paymentType:"ezcash",createdAt:new Date().toISOString()},{_id:"4",accountHolder:"K.W.A.Rasanga",accountNumber:"0741880764",bankName:"eZcash",branch:"Mobile",paymentType:"ezcash",createdAt:new Date().toISOString()}];localStorage.setItem("bankData",JSON.stringify(e))}return n()},n=()=>(s(),JSON.parse(localStorage.getItem("bankData"))),o=e=>{let a=n(),t={...e,_id:Date.now().toString(),createdAt:new Date().toISOString()};return a.push(t),localStorage.setItem("bankData",JSON.stringify(a)),t},l=(e,a)=>{let t=n(),s=t.findIndex(a=>a._id===e);if(-1===s)throw Error("Bank not found");return t[s]={...t[s],...a,updatedAt:new Date().toISOString()},localStorage.setItem("bankData",JSON.stringify(t)),t[s]},c=e=>{let a=n(),t=a.filter(a=>a._id!==e);if(t.length===a.length)throw Error("Bank not found");return localStorage.setItem("bankData",JSON.stringify(t)),{success:!0}};r()},1606:function(e,a,t){"use strict";t.d(a,{Mp:function(){return n},U3:function(){return s},lY:function(){return o}});let s=e=>new Promise((a,t)=>{try{if(!e.to||!e.message){let a=Error("Missing required WhatsApp fields (to, message)");throw console.error("WhatsApp validation failed:",a,e),a}let t=r(e.to);console.log("WHATSAPP DEBUG - Sending message to:",t),console.log("WHATSAPP DEBUG - Message:",e.message.substring(0,100)+"...");try{let a=JSON.parse(localStorage.getItem("sentWhatsAppMessages")||"[]");a.push({to:t,message:e.message,timestamp:new Date().toISOString(),status:"sent"}),localStorage.setItem("sentWhatsAppMessages",JSON.stringify(a)),console.log("WHATSAPP DEBUG - Saved to localStorage successfully")}catch(e){console.error("WHATSAPP DEBUG - Failed to save to localStorage:",e)}setTimeout(()=>{console.log("WHATSAPP DEBUG - WhatsApp message sent successfully to:",t),a({success:!0,message:"WhatsApp message sent successfully"})},1e3)}catch(e){console.error("WhatsApp sending failed:",e),t(e)}}),r=e=>{let a=e.replace(/\D/g,"");return 9===a.length?a="94"+a:10===a.length&&a.startsWith("0")&&(a="94"+a.substring(1)),a},n=e=>{console.log("WHATSAPP DEBUG - sendOrderNotificationToAdmin called");let a="+94771234567",t="\n*SL GAMING HUB - NEW ORDER ALERT*\n\nA new order has been received and requires processing.\n\n*ORDER INFORMATION*\n\uD83D\uDCCB Order Number: ".concat(e.orderNumber||e.orderId||"New Order","\n\uD83D\uDCC6 Order Date: ").concat(new Date().toLocaleString(),"\n⏳ Status: Payment Received - Awaiting Processing\n\n*CUSTOMER INFORMATION*\n\uD83D\uDC64 Customer Name: ").concat(e.username||e.playerName||"Not provided","\n� WhatsApp: ").concat(e.phone||"Not provided","\n\uD83C\uDD94 Game ID: ").concat(e.userId||"Not provided","\n\n*PURCHASE DETAILS*\n\uD83C\uDFAE Game: ").concat(e.gameName||e.game||"","\n\uD83D\uDCE6 Package: ").concat(e.packageName||"","\n").concat(e.packageDescription?"\uD83D\uDCDD Description: ".concat(e.packageDescription,"\n"):"","\n� Amount: ").concat(e.packagePrice||e.totalPrice||"","\n\uD83D\uDCB3 Payment Method: Bank Transfer\n✅ Payment Status: Received\n\n*REQUIRED ACTIONS*\n1. Verify payment details\n2. Process the order in the game system\n3. Update order status in dashboard\n4. Mark as completed when done\n\nPlease login to the admin dashboard to process this order:\n\uD83C\uDF10 Admin URL: http://16.170.236.106/admin/orders\n\nIMPORTANT: This order requires immediate attention.\n  ");return console.log("WHATSAPP DEBUG - Prepared admin WhatsApp message to:",a),s({to:a,message:t})},o=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=r(e),s=encodeURIComponent(a);return"https://wa.me/".concat(t,"?text=").concat(s)}}},function(e){e.O(0,[435,66,484,729,888,774,179],function(){return e(e.s=8353)}),_N_E=e.O()}]);