(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[262],{7078:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin_Dashbord/Games",function(){return t(5611)}])},5611:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return i}});var r=t(5893),s=t(7294),n=t(7066),l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFGmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMS0wMS0wNFQxNTo0NzozMiswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMDEtMDRUMTU6NDk6MjUrMDM6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjEtMDEtMDRUMTU6NDk6MjUrMDM6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTNiNWY4ZGItMTViOC1lNjQy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",o=t(8808),i=()=>{var e,a;let[t,i]=(0,s.useState)([]),[c,d]=(0,s.useState)({gamename:"",description:"",image:null}),[m,g]=(0,s.useState)(null),u=(0,s.useRef)(null),[p,h]=(0,s.useState)(null),[b,f]=(0,s.useState)(!0),[v,x]=(0,s.useState)(""),[N,I]=(0,s.useState)(""),[y,j]=(0,s.useState)(null),S=e=>{let a=atob(e.split(",")[1]||e),t=[];for(let e=0;e<a.length;e+=512){let r=a.slice(e,e+512),s=Array(r.length);for(let e=0;e<r.length;e++)s[e]=r.charCodeAt(e);let n=new Uint8Array(s);t.push(n)}return new File([new Blob(t,{type:"image/png"})],"default-game-image.png",{type:"image/png"})},J=()=>S(l),A=async()=>{f(!0),j("Testing API connection...");try{let e=localStorage.getItem("token");console.log("Testing endpoint: /api/game");let a=await n.Z.get((0,o.kG)("/api/game"),{headers:e?{Authorization:"Bearer ".concat(e)}:{}});console.log("API test response:",a.data),j("API connection successful using endpoint: /api/game")}catch(e){console.error("API connection test failed:",e),j("API connection test failed: ".concat(e.message))}finally{setTimeout(()=>f(!1),500)}},k=async()=>{f(!0),x("");try{let e=localStorage.getItem("token");if(!e){x("Authentication token not found. Please log in again."),f(!1);return}console.log("Fetching games from /api/game...");let a=await n.Z.get((0,o.kG)("/api/game"),{headers:e?{Authorization:"Bearer ".concat(e)}:{}});console.log("Games response:",a.data);let t=[];a.data&&Array.isArray(a.data)?t=a.data:a.data&&a.data.data&&Array.isArray(a.data.data)?t=a.data.data:a.data&&a.data.data&&(t=[a.data.data]),i(t),I("Games loaded successfully"),setTimeout(()=>I(""),3e3),localStorage.setItem("gamesData",JSON.stringify(t))}catch(t){var e,a;console.error("Error fetching games:",t),x("Failed to fetch games: "+((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||t.message));try{let e=localStorage.getItem("gamesData");if(e){let a=JSON.parse(e);Array.isArray(a)&&a.length>0&&(i(a),x("Could not connect to the server. Using locally stored games data."))}}catch(e){console.error("Error using local fallback:",e)}}finally{f(!1)}};(0,s.useEffect)(()=>{k(),A()},[]);let Z=e=>{let{name:a,value:t}=e.target;p?h({...p,[a]:t}):d({...c,[a]:t})},E=async e=>{e.preventDefault(),x(""),I(""),f(!0);try{let e=c.image;if(!e)try{e=J(),console.log("Using default game image")}catch(e){console.error("Error creating default image:",e),x("Please select an image file for the game"),f(!1);return}let a=localStorage.getItem("token");if(!a){x("Authentication token not found. Please log in again."),f(!1);return}let t=new FormData;for(let[e,a]of(t.append("gamename",c.gamename),t.append("description",c.description),console.log("FormData entries:"),t.entries()))console.log("".concat(e,": ").concat(a instanceof File?a.name:a));for(let[a,r]of(e&&(t.append("image",e),console.log("Appended image:",e instanceof File?e.name:"Base64 image")),console.log("Adding game with data:",{name:c.gamename,description:c.description,hasImage:!!e}),console.log("Final FormData entries:"),t.entries()))console.log("".concat(a,": ").concat(r instanceof File?r.name:r));let r=await n.Z.post((0,o.kG)("/api/game"),t,{headers:a?{Authorization:"Bearer ".concat(a)}:{}});console.log("Game added response:",r.data),d({gamename:"",description:"",image:null}),g(null),u.current&&(u.current.value=""),I("Game added successfully!");let s=localStorage.getItem("gamesData")?JSON.parse(localStorage.getItem("gamesData")):[],l={gamename:c.gamename,description:c.description,image:r.data.image||r.data.imageUrl||"",_id:r.data._id||Date.now().toString(),createdAt:new Date().toISOString()};s.push(l),localStorage.setItem("gamesData",JSON.stringify(s)),k(),setTimeout(()=>I(""),3e3)}catch(t){var a;console.error("Error adding game:",(null===(a=t.response)||void 0===a?void 0:a.data)||t.message);let e="Failed to add game: ";t.response?(console.error("Error response data:",t.response.data),console.error("Error response status:",t.response.status),e+="Server responded with status: ".concat(t.response.status,". "),t.response.data&&"object"==typeof t.response.data?t.response.data.message?e+=t.response.data.message:t.response.data.error?e+=t.response.data.error:e+=JSON.stringify(t.response.data):"string"==typeof t.response.data&&(e+=t.response.data)):t.request?e+="No response received from server. Please check your connection.":e+=t.message,x(e)}finally{f(!1)}},U=e=>{let a={...e};"string"==typeof a.image&&(a.originalImageUrl=a.image,console.log("Editing game with image URL:",a.image)),h(a),a.image&&"string"==typeof a.image?g(a.image):g(null),u.current&&(u.current.value="")},w=async e=>{e.preventDefault(),x(""),I(""),f(!0);try{let e,a=p.image,t=localStorage.getItem("token"),r=t?{Authorization:"Bearer ".concat(t)}:{};if(!t){x("Authentication token not found. Please log in again."),f(!1);return}if(a instanceof File){let t=new FormData;for(let[e,r]of(t.append("gamename",p.gamename),t.append("description",p.description),t.append("image",a),console.log("Uploading with FormData - new image file:",a.name),console.log("FormData entries:"),t.entries()))console.log("".concat(e,": ").concat(r instanceof File?r.name:r));e=await n.Z.put((0,o.kG)("/api/game/".concat(p._id)),t,{headers:{...r}})}else{let t={gamename:p.gamename,description:p.description};"string"==typeof a&&a&&(t.keepExistingImage=!0,console.log("Using existing image URL in JSON request")),console.log("Updating with JSON data:",t),e=await n.Z.put((0,o.kG)("/api/game/".concat(p._id)),t,{headers:{...r,"Content-Type":"application/json"}})}console.log("Game updated response:",e.data),I("Game updated successfully!");let s=localStorage.getItem("gamesData")?JSON.parse(localStorage.getItem("gamesData")):[],l=s.findIndex(e=>e._id===p._id);-1!==l&&(s[l]={...s[l],gamename:p.gamename,description:p.description,image:e.data.image||e.data.imageUrl||s[l].image,updatedAt:new Date().toISOString()},localStorage.setItem("gamesData",JSON.stringify(s))),h(null),g(null),u.current&&(u.current.value=""),k(),setTimeout(()=>I(""),3e3)}catch(t){var a;console.error("Error updating game:",(null===(a=t.response)||void 0===a?void 0:a.data)||t.message);let e="Failed to update game: ";t.response?(console.error("Error response data:",t.response.data),console.error("Error response status:",t.response.status),e+="Server responded with status: ".concat(t.response.status,". "),t.response.data&&"object"==typeof t.response.data?t.response.data.message?e+=t.response.data.message:t.response.data.error?e+=t.response.data.error:e+=JSON.stringify(t.response.data):"string"==typeof t.response.data&&(e+=t.response.data)):t.request?e+="No response received from server. Please check your connection.":e+=t.message,x(e)}finally{f(!1)}},G=async e=>{if(confirm("Are you sure you want to delete this game? This will also delete all associated packages.")){x(""),I(""),f(!0);try{let a=localStorage.getItem("token");if(!a){x("Authentication token not found. Please log in again."),f(!1);return}console.log("Deleting game with ID: ".concat(e)),await n.Z.delete((0,o.kG)("/api/game/".concat(e)),{headers:a?{Authorization:"Bearer ".concat(a)}:{}}),I("Game deleted successfully!");let t=(localStorage.getItem("gamesData")?JSON.parse(localStorage.getItem("gamesData")):[]).filter(a=>a._id!==e);localStorage.setItem("gamesData",JSON.stringify(t)),p&&p._id===e&&(h(null),g(null),u.current&&(u.current.value="")),k(),setTimeout(()=>I(""),3e3)}catch(t){var a;console.error("Error deleting game:",(null===(a=t.response)||void 0===a?void 0:a.data)||t.message);let e="Failed to delete game: ";t.response?(console.error("Error response data:",t.response.data),console.error("Error response status:",t.response.status),e+="Server responded with status: ".concat(t.response.status,". "),t.response.data&&"object"==typeof t.response.data?t.response.data.message?e+=t.response.data.message:t.response.data.error?e+=t.response.data.error:e+=JSON.stringify(t.response.data):"string"==typeof t.response.data&&(e+=t.response.data)):t.request?e+="No response received from server. Please check your connection.":e+=t.message,x(e)}finally{f(!1)}}};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Manage Games"}),y&&(0,r.jsx)("div",{className:"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded mb-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("p",{children:y}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:A,className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded transition-colors",disabled:b,children:"Test API"})})]})}),N&&(0,r.jsx)("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4",children:(0,r.jsx)("p",{children:N})}),v&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:[(0,r.jsx)("p",{children:v}),(0,r.jsx)("button",{className:"mt-2 bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",onClick:k,children:"Try Again"})]}),(0,r.jsxs)("form",{onSubmit:p?w:E,className:"mb-6 p-6 bg-gray-200 rounded",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:p?"Edit Game":"Add New Game"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Game Name"}),(0,r.jsx)("input",{type:"text",name:"gamename",placeholder:"Enter game name",value:p?p.gamename:c.gamename,onChange:Z,className:"border p-2 w-full rounded",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Game Image ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",ref:u,onChange:e=>{let a=e.target.files[0];if(!a)return;if(!["image/jpeg","image/png","image/jpg","image/gif"].includes(a.type)){x("Please select a valid image file (JPEG, PNG, JPG, GIF)");return}if(a.size>2097152){x("Image size should be less than 2MB");return}let t=new FileReader;t.onloadend=()=>{g(t.result),p?h({...p,image:a}):d({...c,image:a})},t.readAsDataURL(a)},className:"hidden",id:"gameImageUpload",required:!(null==p?void 0:p.image)}),(0,r.jsxs)("label",{htmlFor:"gameImageUpload",className:"cursor-pointer bg-blue-500 hover:bg-blue-600 text-white rounded px-3 py-2 text-sm flex-grow flex items-center justify-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(null==p?void 0:null===(e=p.image)||void 0===e?void 0:e.name)||(null==p?void 0:p.image)?"string"==typeof p.image?"Change image":"Selected: ".concat(p.image.name.substring(0,15)).concat(p.image.name.length>15?"...":""):(null==c?void 0:null===(a=c.image)||void 0===a?void 0:a.name)?"Selected: ".concat(c.image.name.substring(0,15)).concat(c.image.name.length>15?"...":""):"Choose image file..."]}),(0,r.jsx)("button",{type:"button",onClick:()=>{p?h({...p,image:null}):d({...c,image:null}),g(null),u.current&&(u.current.value="")},className:"bg-red-500 hover:bg-red-600 text-white px-2 py-2 rounded text-sm",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)("div",{className:"relative w-32 h-32 border rounded overflow-hidden bg-gray-100",children:m?(0,r.jsx)("img",{src:m,alt:"Preview",className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src=l}}):p&&"string"==typeof p.image&&p.image?(0,r.jsx)("img",{src:p.image,alt:p.gamename,className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src=l}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:l,alt:"Default game placeholder",className:"w-full h-full object-cover"}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-center text-xs p-2",children:(0,r.jsx)("span",{className:"bg-black bg-opacity-50 text-white p-1 rounded",children:"Select an image"})})]})})})]})]}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,r.jsx)("textarea",{name:"description",placeholder:"Enter game description",value:p?p.description:c.description,onChange:Z,className:"border p-2 w-full rounded h-24",required:!0})]}),(0,r.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,r.jsx)("button",{type:"submit",className:"".concat(p?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"," text-white px-4 py-2 rounded"),disabled:b,children:b?p?"Updating...":"Adding...":p?"Update Game":"Add Game"}),p&&(0,r.jsx)("button",{type:"button",onClick:()=>h(null),className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded",children:"Cancel"})]})]}),p&&(0,r.jsxs)("div",{className:"mb-6 p-4 border border-blue-300 bg-blue-50 rounded",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Game Preview"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[(0,r.jsx)("div",{className:"w-40 h-40 overflow-hidden rounded bg-gray-100",children:m?(0,r.jsx)("img",{src:m,alt:p.gamename,className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src=l}}):(null==p?void 0:p.image)?(0,r.jsx)("img",{src:"string"==typeof p.image?p.image:URL.createObjectURL(p.image),alt:p.gamename,className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src=l}}):(0,r.jsx)("img",{src:l,alt:"Game placeholder",className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"text-xl font-semibold",children:p.gamename||"Game Name"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:p.description||"No description available"})]})]})]}),b?(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-orange-500"}),(0,r.jsx)("p",{className:"mt-2",children:"Loading games..."})]}):v&&0===t.length?(0,r.jsx)("div",{className:"text-center py-4 text-red-500",children:(0,r.jsx)("p",{children:v})}):0===t.length?(0,r.jsx)("div",{className:"text-center py-10 bg-gray-100 rounded",children:(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"No games found. Add your first game using the form above."})}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border border-gray-300 rounded",children:[(0,r.jsx)("thead",{className:"bg-[#0e08ab] text-white",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"border p-2",children:"Game Name"}),(0,r.jsx)("th",{className:"border p-2",children:"Image"}),(0,r.jsx)("th",{className:"border p-2",children:"Description"}),(0,r.jsx)("th",{className:"border p-2",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:t.map(e=>(0,r.jsxs)("tr",{className:"text-center bg-gray-100 hover:bg-gray-200 transition-colors",children:[(0,r.jsx)("td",{className:"border p-2 font-medium",children:e.gamename}),(0,r.jsx)("td",{className:"border p-2",children:(0,r.jsx)("div",{className:"h-16 w-16 mx-auto overflow-hidden rounded bg-gray-100",children:(0,r.jsx)("img",{src:e.image||l,alt:e.gamename||"Game",className:"h-full w-full object-cover",onError:e=>{e.target.onerror=null,e.target.src=l}})})}),(0,r.jsx)("td",{className:"border p-2 text-left",children:(0,r.jsx)("div",{className:"max-h-20 overflow-y-auto",children:e.description})}),(0,r.jsx)("td",{className:"border p-2",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[(0,r.jsx)("button",{onClick:()=>U(e),className:"bg-orange-500 hover:bg-orange-600 text-white px-3 py-1 rounded",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>G(e._id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded",children:"Delete"})]})})]},e._id))})]})}),(0,r.jsxs)("div",{className:"mt-6 flex justify-between items-center text-sm text-gray-500",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("p",{children:["Total Games: ",t.length]})}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:k,className:"text-blue-600 hover:text-blue-800 underline",disabled:b,children:b?"Refreshing...":"Refresh Data"})})]})]})}},8808:function(e,a,t){"use strict";t.d(a,{NU:function(){return n},kG:function(){return s}});let r=t(3454).env.NEXT_PUBLIC_API_URL||"/api",s=e=>"".concat(r,"/").concat(e),n=e=>{let a={"Content-Type":"application/json"};return e&&(a.Authorization="Bearer ".concat(e)),a}}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=7078)}),_N_E=e.O()}]);