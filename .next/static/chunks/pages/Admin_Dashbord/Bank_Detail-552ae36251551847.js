(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[573],{7863:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Admin_Dashbord/Bank_Detail",function(){return t(6527)}])},6527:function(e,a,t){"use strict";t.r(a);var r=t(5893),n=t(7294),s=t(6729),c=t(8930);a.default=()=>{let[e,a]=(0,n.useState)([]),[t,l]=(0,n.useState)({accountHolder:"",accountNumber:"",bankName:"",branch:""}),[o,d]=(0,n.useState)(null),[i,u]=(0,n.useState)(!1),[m,b]=(0,n.useState)({message:"",type:""});(0,n.useEffect)(()=>{(0,c.WQ)(),h()},[]);let h=()=>{u(!0);try{let e=(0,c.sr)();a(e),b({message:e.length>0?"":"No bank accounts found. Add one below.",type:e.length>0?"":"info"})}catch(e){console.error("Error fetching banks:",e),a([]),b({message:"Error fetching bank data: "+e.message,type:"error"})}finally{u(!1)}},x=e=>{l({...t,[e.target.name]:e.target.value})},g=e=>{if(window.confirm("Are you sure you want to delete this bank account?")){u(!0);try{(0,c.I2)(e),b({message:"Bank deleted successfully!",type:"success"}),h()}catch(e){console.error("Error deleting bank",e),b({message:"Failed to delete bank: "+e.message,type:"error"})}finally{u(!1)}}},N=e=>{l({accountHolder:e.accountHolder||"",accountNumber:e.accountNumber||"",bankName:e.bankName||"",branch:e.branch||""}),d(e._id)};return(0,r.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,r.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Bank Account Management"}),(0,r.jsxs)("button",{onClick:h,className:"bg-blue-100 text-blue-700 px-3 py-2 rounded-md hover:bg-blue-200 transition-colors flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})}),"Refresh"]})]}),m.message&&(0,r.jsx)("div",{className:"mb-6 p-4 rounded-md ".concat("success"===m.type?"bg-green-100 text-green-800 border-l-4 border-green-500":"info"===m.type?"bg-blue-100 text-blue-800 border-l-4 border-blue-500":"bg-red-100 text-red-800 border-l-4 border-red-500"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("span",{className:"mr-2 text-xl ".concat("success"===m.type?"text-green-500":"info"===m.type?"text-blue-500":"text-red-500"),children:"success"===m.type?"✓":"info"===m.type?"ℹ":"⚠"}),(0,r.jsx)("p",{children:m.message}),(0,r.jsx)("button",{onClick:()=>b({message:"",type:""}),className:"ml-auto text-gray-500 hover:text-gray-700",children:"\xd7"})]})}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:o?"Edit Bank Account":"Add New Bank Account"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u(!0);try{o?((0,c.AG)(o,t),b({message:"Bank details updated successfully!",type:"success"})):((0,c.qH)(t),b({message:"Bank details added successfully!",type:"success"})),l({accountHolder:"",accountNumber:"",bankName:"",branch:""}),d(null),h()}catch(e){console.error("Error saving bank",e),b({message:"Failed to save bank details: "+e.message,type:"error"})}finally{u(!1)}},className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"accountHolder",className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder Name"}),(0,r.jsx)("input",{type:"text",id:"accountHolder",name:"accountHolder",value:t.accountHolder,onChange:x,placeholder:"Enter account holder name",className:"border border-gray-300 p-2 rounded-md w-full focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"accountNumber",className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),(0,r.jsx)("input",{type:"text",id:"accountNumber",name:"accountNumber",value:t.accountNumber,onChange:x,placeholder:"Enter account number",className:"border border-gray-300 p-2 rounded-md w-full focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"bankName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),(0,r.jsx)("input",{type:"text",id:"bankName",name:"bankName",value:t.bankName,onChange:x,placeholder:"Enter bank name",className:"border border-gray-300 p-2 rounded-md w-full focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"branch",className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch"}),(0,r.jsx)("input",{type:"text",id:"branch",name:"branch",value:t.branch,onChange:x,placeholder:"Enter branch name",className:"border border-gray-300 p-2 rounded-md w-full focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[o&&(0,r.jsx)("button",{type:"button",onClick:()=>{l({accountHolder:"",accountNumber:"",bankName:"",branch:""}),d(null)},className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-md transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{type:"submit",className:"".concat(i?"bg-gray-500":"bg-blue-600 hover:bg-blue-700"," text-white px-4 py-2 rounded-md flex items-center justify-center transition-colors"),disabled:i,children:[i&&(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o?"Update Bank Account":"Add Bank Account"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Bank Accounts"}),i&&0===e.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 bg-gray-50 rounded-lg border border-gray-200",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,r.jsx)("p",{className:"mt-3 text-gray-600",children:"Loading bank details..."})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-6 border-b pb-6",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Customer Preview"}),(0,r.jsx)(s.Z,{bankAccounts:e,theme:"light"})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full border-collapse",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("th",{className:"p-3 border text-left",children:"Holder"}),(0,r.jsx)("th",{className:"p-3 border text-left",children:"Account No"}),(0,r.jsx)("th",{className:"p-3 border text-left",children:"Bank"}),(0,r.jsx)("th",{className:"p-3 border text-left",children:"Branch"}),(0,r.jsx)("th",{className:"p-3 border text-center",children:"Actions"})]})}),(0,r.jsxs)("tbody",{children:[e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"p-3 border",children:e.accountHolder}),(0,r.jsx)("td",{className:"p-3 border font-mono",children:e.accountNumber}),(0,r.jsx)("td",{className:"p-3 border",children:e.bankName}),(0,r.jsx)("td",{className:"p-3 border",children:e.branch}),(0,r.jsx)("td",{className:"p-3 border",children:(0,r.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>N(e),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-md transition-colors",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>g(e._id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md transition-colors",children:"Delete"})]})})]},e._id)),0===e.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"5",className:"p-6 text-center text-gray-500",children:"No bank details found. Add your first bank account above."})})]})]})})]})]})]})})}},8930:function(e,a,t){"use strict";t.d(a,{AG:function(){return l},I2:function(){return o},WQ:function(){return n},qH:function(){return c},sr:function(){return s}});let r=()=>{localStorage.getItem("bankData")||localStorage.setItem("bankData",JSON.stringify([]))},n=()=>{if(r(),0===s().length){let e=[{_id:"1",accountHolder:"K.W.A.Rasanga",accountNumber:"86800581",bankName:"Bank of Ceylon",branch:"Katuwana Branch",paymentType:"bank",createdAt:new Date().toISOString()},{_id:"2",accountHolder:"K.W.A.Rasanga",accountNumber:"115857695088",bankName:"Sampath Bank",branch:"Middeniya Branch",paymentType:"bank",createdAt:new Date().toISOString()},{_id:"3",accountHolder:"K.W.A.Rasanga",accountNumber:"0773043667",bankName:"eZcash",branch:"Mobile",paymentType:"ezcash",createdAt:new Date().toISOString()},{_id:"4",accountHolder:"K.W.A.Rasanga",accountNumber:"0741880764",bankName:"eZcash",branch:"Mobile",paymentType:"ezcash",createdAt:new Date().toISOString()}];localStorage.setItem("bankData",JSON.stringify(e))}return s()},s=()=>(r(),JSON.parse(localStorage.getItem("bankData"))),c=e=>{let a=s(),t={...e,_id:Date.now().toString(),createdAt:new Date().toISOString()};return a.push(t),localStorage.setItem("bankData",JSON.stringify(a)),t},l=(e,a)=>{let t=s(),r=t.findIndex(a=>a._id===e);if(-1===r)throw Error("Bank not found");return t[r]={...t[r],...a,updatedAt:new Date().toISOString()},localStorage.setItem("bankData",JSON.stringify(t)),t[r]},o=e=>{let a=s(),t=a.filter(a=>a._id!==e);if(t.length===a.length)throw Error("Bank not found");return localStorage.setItem("bankData",JSON.stringify(t)),{success:!0}};n()}},function(e){e.O(0,[729,888,774,179],function(){return e(e.s=7863)}),_N_E=e.O()}]);