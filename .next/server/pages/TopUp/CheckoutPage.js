"use strict";(()=>{var e={};e.id=88,e.ids=[88,660],e.modules={8149:(e,s,a)=>{a.a(e,async(e,r)=>{try{a.r(s),a.d(s,{config:()=>b,default:()=>g,getServerSideProps:()=>x,getStaticPaths:()=>u,getStaticProps:()=>h,reportWebVitals:()=>f,routeModule:()=>D,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>j,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>y});var t=a(7093),l=a(5244),o=a(1323),n=a(1682),i=a.n(n),d=a(8141),c=a.n(d),m=a(1123),p=e([m]);m=(p.then?(await p)():p)[0];let g=(0,o.l)(m,"default"),h=(0,o.l)(m,"getStaticProps"),u=(0,o.l)(m,"getStaticPaths"),x=(0,o.l)(m,"getServerSideProps"),b=(0,o.l)(m,"config"),f=(0,o.l)(m,"reportWebVitals"),y=(0,o.l)(m,"unstable_getStaticProps"),N=(0,o.l)(m,"unstable_getStaticPaths"),j=(0,o.l)(m,"unstable_getStaticParams"),v=(0,o.l)(m,"unstable_getServerProps"),w=(0,o.l)(m,"unstable_getServerSideProps"),D=new t.PagesRouteModule({definition:{kind:l.x.PAGES,page:"/TopUp/CheckoutPage",pathname:"/TopUp/CheckoutPage",bundlePath:"",filename:""},components:{App:c(),Document:i()},userland:m});r()}catch(e){r(e)}})},1123:(e,s,a)=>{a.a(e,async(e,r)=>{try{a.r(s),a.d(s,{default:()=>f});var t=a(997),l=a(6689),o=a(4661),n=a(9648),i=a(8808),d=a(2603),c=a(2858),m=a(8959),p=a(6729),g=a(4899),h=a(2771),u=a(1606),x=e([n,c]);[n,c]=x.then?(await x)():x;let b=e=>/^[0-9a-fA-F]{24}$/.test(e),f=function(){let[e,s]=(0,l.useState)(null),[a,r]=(0,l.useState)(!1),[x,f]=(0,l.useState)(!1),[y,N]=(0,l.useState)((0,g.jl)()),[j,v]=(0,l.useState)([]),[w,D]=(0,l.useState)(null),[E,S]=(0,l.useState)(null),[k,P]=(0,l.useState)("bank"),I=(0,o.useNavigate)();return(0,o.useLocation)(),(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[t.jsx(c.Z,{}),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:"Complete Your Payment"}),e&&(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"Order Summary"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-600 mb-2",children:"Game:"}),t.jsx("p",{className:"font-medium",children:e.gameName}),t.jsx("p",{className:"text-gray-600 mt-4 mb-2",children:"User ID:"}),E?t.jsx("p",{className:"font-medium bg-purple-50 p-2 rounded border-l-4 border-purple-500",children:E}):t.jsx("p",{className:"font-medium text-gray-500 bg-gray-50 p-2 rounded border-l-4 border-gray-400",children:"Not available"}),t.jsx("p",{className:"text-gray-600 mt-4 mb-2",children:"Player ID:"}),e.playerId&&""!==e.playerId.trim()?t.jsx("p",{className:"font-medium bg-blue-50 p-2 rounded border-l-4 border-blue-500",children:e.playerId}):t.jsx("p",{className:"font-medium text-red-500 bg-red-50 p-2 rounded border-l-4 border-red-500",children:"Not provided - Please go back and enter your Player ID"}),t.jsx("p",{className:"text-gray-600 mt-4 mb-2",children:"Username:"}),e.username&&""!==e.username.trim()?t.jsx("p",{className:"font-medium bg-blue-50 p-2 rounded border-l-4 border-blue-500",children:e.username}):t.jsx("p",{className:"font-medium text-yellow-500 bg-yellow-50 p-2 rounded border-l-4 border-yellow-500",children:"Not provided"})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-600 mb-2",children:"Package:"}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-8 h-8 bg-orange-300 rounded-full flex items-center justify-center mr-2",children:t.jsx("span",{className:"text-lg font-bold text-blue-900",children:"\uD83D\uDC8E"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:e.packageName}),t.jsx("p",{className:"text-sm text-gray-500",children:e.packageDescription})]})]}),t.jsx("p",{className:"text-gray-600 mt-4 mb-2",children:"Amount:"}),t.jsx("p",{className:"font-bold text-xl text-green-600",children:e.packagePrice})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"Payment Instructions"}),(0,t.jsxs)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 mb-4",children:[t.jsx("p",{className:"text-blue-700",children:"Please transfer the exact amount using your preferred payment method and upload your payment slip."}),(0,t.jsxs)("div",{className:"mt-2 grid grid-cols-2 gap-2 text-sm",children:[(0,t.jsxs)("div",{className:"bg-white rounded p-2 shadow-sm",children:[t.jsx("span",{className:"font-semibold",children:"Amount to Pay:"}),t.jsx("span",{className:"text-green-600 font-bold ml-2",children:e?.packagePrice||"0.00"})]}),(0,t.jsxs)("div",{className:"bg-white rounded p-2 shadow-sm",children:[t.jsx("span",{className:"font-semibold",children:"Reference:"}),(0,t.jsxs)("span",{className:"text-blue-600 font-mono ml-2",children:["SL-",e?.playerId?.substring(0,6)||"GAMING"]})]})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Select Payment Method"}),(0,t.jsxs)("div",{className:"flex border border-gray-300 rounded-lg overflow-hidden",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>P("bank"),className:`flex-1 py-3 px-4 flex items-center justify-center ${"bank"===k?"bg-blue-100 border-b-2 border-blue-500 text-blue-800":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:[t.jsx("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),t.jsx("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]}),(0,t.jsxs)("span",{className:"flex flex-col items-start",children:[t.jsx("span",{children:"Bank Transfer"}),t.jsx("span",{className:"text-xs text-blue-600 font-light",children:"Standard processing"})]})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>P("ezcash"),className:`flex-1 py-3 px-4 flex items-center justify-center relative ${"ezcash"===k?"bg-green-100 border-b-2 border-green-500 text-green-800":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[t.jsx("span",{className:"absolute -top-2 right-2 bg-green-500 text-white text-xs px-2 py-0.5 rounded-full font-medium shadow-sm",children:"Recommended"}),t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M17.498 14.382c-.301-.15-1.767-.867-2.04-.966-.273-.101-.473-.15-.673.15-.197.295-.771.964-.944 1.162-.175.195-.349.21-.646.075-.3-.15-1.263-.465-2.403-1.485-.888-.795-1.484-1.77-1.66-2.07-.174-.3-.019-.465.13-.615.136-.135.301-.345.451-.523.146-.181.194-.301.297-.496.1-.21.049-.375-.025-.524-.075-.15-.672-1.62-.922-2.206-.24-.584-.487-.51-.672-.51-.172-.015-.371-.015-.571-.015-.2 0-.523.074-.797.359-.273.3-1.045 1.02-1.045 2.475s1.07 2.865 1.219 3.075c.149.195 2.105 3.195 5.1 4.485.714.3 1.27.48 1.704.629.714.227 1.365.195 1.88.121.574-.091 1.767-.721 2.016-1.426.255-.705.255-1.29.18-1.425-.074-.135-.27-.21-.57-.345m-5.446 7.443h-.016c-1.77 0-3.524-.48-5.055-1.38l-.36-.214-3.75.975 1.005-3.645-.239-.375c-.99-1.576-1.516-3.391-1.516-5.26 0-5.445 4.455-9.885 9.942-9.885 2.654 0 5.145 1.035 7.021 2.91 1.875 1.859 2.909 4.35 2.909 6.99-.004 5.444-4.46 9.885-9.935 9.885M20.52 3.449C18.24 1.245 15.24 0 12.045 0 5.463 0 .104 5.334.101 11.893c0 2.096.549 4.14 1.595 5.945L0 24l6.335-1.652c1.746.943 3.71 1.444 5.71 1.447h.006c6.585 0 11.946-5.336 11.949-11.896 0-3.176-1.24-6.165-3.495-8.411"})}),(0,t.jsxs)("span",{className:"flex flex-col items-start",children:[t.jsx("span",{children:"eZcash"}),t.jsx("span",{className:"text-xs text-green-600 font-light",children:"Fast processing"})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg mb-6 border border-blue-100",children:[t.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:"bank"===k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",viewBox:"0 0 20 20",fill:"currentColor",children:[t.jsx("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),t.jsx("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]}),"Bank Account Information"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("svg",{className:"w-5 h-5 mr-2 text-green-500",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M17.498 14.382c-.301-.15-1.767-.867-2.04-.966-.273-.101-.473-.15-.673.15-.197.295-.771.964-.944 1.162-.175.195-.349.21-.646.075-.3-.15-1.263-.465-2.403-1.485-.888-.795-1.484-1.77-1.66-2.07-.174-.3-.019-.465.13-.615.136-.135.301-.345.451-.523.146-.181.194-.301.297-.496.1-.21.049-.375-.025-.524-.075-.15-.672-1.62-.922-2.206-.24-.584-.487-.51-.672-.51-.172-.015-.371-.015-.571-.015-.2 0-.523.074-.797.359-.273.3-1.045 1.02-1.045 2.475s1.07 2.865 1.219 3.075c.149.195 2.105 3.195 5.1 4.485.714.3 1.27.48 1.704.629.714.227 1.365.195 1.88.121.574-.091 1.767-.721 2.016-1.426.255-.705.255-1.29.18-1.425-.074-.135-.27-.21-.57-.345m-5.446 7.443h-.016c-1.77 0-3.524-.48-5.055-1.38l-.36-.214-3.75.975 1.005-3.645-.239-.375c-.99-1.576-1.516-3.391-1.516-5.26 0-5.445 4.455-9.885 9.942-9.885 2.654 0 5.145 1.035 7.021 2.91 1.875 1.859 2.909 4.35 2.909 6.99-.004 5.444-4.46 9.885-9.935 9.885M20.52 3.449C18.24 1.245 15.24 0 12.045 0 5.463 0 .104 5.334.101 11.893c0 2.096.549 4.14 1.595 5.945L0 24l6.335-1.652c1.746.943 3.71 1.444 5.71 1.447h.006c6.585 0 11.946-5.336 11.949-11.896 0-3.176-1.24-6.165-3.495-8.411"})}),"eZcash Information"]})}),t.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"bank"===k?"Please transfer the exact amount to one of the following bank accounts and upload the payment slip to complete your order.":"Please send the exact amount to one of the following eZcash numbers and upload a screenshot of the payment to complete your order."}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:t.jsx(p.Z,{bankAccounts:j,theme:"light",className:"mt-2",paymentType:k})}),t.jsx("div",{className:"mt-4 bg-yellow-50 border-l-4 border-yellow-400 p-4 text-sm",children:(0,t.jsxs)("p",{className:"text-yellow-700",children:[t.jsx("strong",{children:"Important:"})," ","bank"===k?"Please include your Player ID as the reference when making the bank transfer.":"Please mention your Player ID in the eZcash payment message or note."," This will help us identify your payment quickly."]})}),(0,t.jsxs)("div",{className:"mt-4 bg-yellow-100 border border-yellow-300 rounded-lg p-4 text-sm",children:[t.jsx("h4",{className:"font-bold text-yellow-800 mb-2",children:"à¶¸à·”à¶¯à¶½à·Š à¶œà·™à·€à·“à¶¸à·š à¶‹à¶´à¶¯à·™à·ƒà·Š"}),t.jsx("ul",{className:"space-y-2 text-yellow-800",children:"bank"===k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:"à¶±à·’à·€à·à¶»à¶¯à·’ à¶œà·’à¶«à·”à¶¸à·Š à¶­à·œà¶»à¶­à·”à¶»à·” à·€à¶½à¶§ à¶…à¶¯à·à¶½ à¶¸à·”à¶¯à¶½ à¶¶à·à¶» à¶šà¶»à¶±à·Šà¶±"})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:"à¶…à¶¯ à¶¯à·’à¶±à¶ºà·š à¶¸à·”à¶¯à¶½à·Š à¶œà·™à·€à·“à¶¸à·Š à·ƒà¶¯à·„à· à¶´à¶¸à¶«à¶šà·Š top-up à¶½à¶¶à· à¶œà¶­ à·„à·à¶š"})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:"à¶¸à·”à¶¯à¶½à·Š à¶¯à·à¶¸à·“à¶¸à·šà¶¯à·“ à¶»à·’à·ƒà·’à¶§à·Š 2 à¶šà·Š à¶‡à¶­à·Šà¶±à¶¸à·Š 2 à¶¸ à¶‘à¶š image à¶‘à¶šà¶šà·’à¶±à·Š à¶´à·„à¶½à·’à¶±à·Š uplode à¶šà¶»à¶±à·Šà¶±"})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:"à¶šà·’à·„à·’à¶´à·€à¶»à¶šà·Š à¶‘à¶šà¶¸ à¶»à·’à·ƒà·’à¶§à·Š à¶´à¶­ à¶‘à·€à·“à¶¸à·™à¶±à·Š à¶”à¶¶à·€ web side à¶‘à¶šà·™à¶±à·Š banned à·€à¶±à·” à¶‡à¶­"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:"à¶±à·’à·€à·à¶»à¶¯à·’ eZcash à¶…à¶‚à¶šà¶ºà¶§ à¶¸à·”à¶¯à¶½à·Š à¶ºà·œà¶¸à·” à¶šà¶»à¶±à·Šà¶±"})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:"à¶œà·™à·€à·“à¶¸à·Š à¶šà¶»à¶± à·€à·’à¶§ à¶”à¶¶à·š Player ID à·ƒà¶³à·„à¶±à·Š à¶šà¶»à¶±à·Šà¶±"})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:"à¶…à¶¯ à¶¯à·’à¶±à¶ºà·š à¶¸à·”à¶¯à¶½à·Š à¶œà·™à·€à·“à¶¸à·Š à·ƒà¶¯à·„à· à¶´à¶¸à¶«à¶šà·Š top-up à¶½à¶¶à· à¶œà¶­ à·„à·à¶š"})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:"à¶œà·™à·€à·“à¶¸à·Š à·ƒà·’à¶¯à·” à¶šà¶½ à¶´à·ƒà·” à¶”à¶¶à¶§ à¶½à·à¶¶à·™à¶± SMS à¶‘à¶š à·„à· à¶œà·™à·€à·“à¶¸à·Š à¶­à·„à·€à·”à¶»à·”à·€ screenshot à¶šà¶» upload à¶šà¶»à¶±à·Šà¶±"})]}),(0,t.jsxs)("li",{className:"flex items-start",children:[t.jsx("span",{className:"mr-2",children:"â€¢"}),t.jsx("span",{children:"à¶šà·’à·„à·’à¶´à·€à¶»à¶šà·Š à¶‘à¶šà¶¸ à¶œà·™à·€à·“à¶¸à·Š à¶­à·„à·€à·”à¶»à·”à·€ à¶‘à·€à·“à¶¸à·™à¶±à·Š à¶”à¶¶à·€ web side à¶‘à¶šà·™à¶±à·Š banned à·€à¶±à·” à¶‡à¶­"})]})]})})]})]}),x?(0,t.jsxs)("div",{className:"mt-6 p-6 bg-green-50 border border-green-200 rounded-lg text-center",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-green-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.jsx("h3",{className:"text-xl font-medium text-green-800 mb-2",children:"Order Placed Successfully!"}),(0,t.jsxs)("p",{className:"text-green-600",children:["Your order has been recorded and ","bank"===k?"bank slip":"eZcash payment proof"," received."]}),(0,t.jsxs)("p",{className:"text-green-700 mt-3",children:["Your game credits will be added to your account ","bank"===k?"within 1 business day":"typically within 2-3 hours"," after payment verification."]}),"ezcash"===k&&(0,t.jsxs)("p",{className:"text-green-700 mt-2",children:[t.jsx("span",{className:"font-semibold",children:"eZcash Support:"})," For payment issues, contact customer service at 0773043667."]}),t.jsx("p",{className:"text-green-600 mt-3",children:"Redirecting to home page..."})]}):(0,t.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),console.log("ORDER DEBUG - Form submission started"),!w){alert(`Please upload your ${"bank"===k?"bank slip":"eZcash payment screenshot"} to complete the order.`);return}r(!0),console.log("ORDER DEBUG - Starting file reader");let a=new FileReader;a.onerror=function(e){console.error("ORDER DEBUG - FileReader error:",e),r(!1),alert("Error reading the uploaded file. Please try again with a different file.")},a.onload=function(s){console.log("ORDER DEBUG - File successfully read");let a=s.target.result,t=`ORD-${Date.now().toString().slice(-6)}`,l={orderId:t,orderNumber:t,game:e?.gameName||"",userId:E||"",playerName:e?.username||"",playerId:e?.playerId||"",packageId:e?.packageId||"",packageName:e?.packageName||"",quantity:1,totalPrice:o(e?.packagePrice)||0,date:e?.date||new Date().toISOString(),receipt:a,paymentMethod:k,status:"pending"};function o(e){if(!e)return 0;if("string"==typeof e){let s=e.replace(/[^\d.]/g,""),a=parseFloat(s);return a<1&&s.length>=3?1e3*a:a}return parseFloat(e)||0}console.log("ORDER DEBUG - Preparing to save order:",l);try{let e=JSON.parse(localStorage.getItem("completedOrders")||"[]");localStorage.setItem("completedOrders",JSON.stringify([...e,l])),console.log("ORDER DEBUG - Order saved to localStorage successfully")}catch(e){console.error("ORDER DEBUG - Failed to save order to localStorage:",e)}let c=[],m={...e,orderNumber:t,receiptImage:!0,gameName:e?.gameName||"",game:e?.gameName||"",packageName:e?.packageName||"",packagePrice:e?.packagePrice||"",totalPrice:o(e?.packagePrice)||0,userId:E||"",playerId:e?.playerId||"",username:e?.username||"",playerName:e?.username||""},p=localStorage.getItem("token");if(p){b(l.userId)||console.warn("ORDER DEBUG - Invalid user ID format for MongoDB:",l.userId),b(l.packageId)||console.warn("ORDER DEBUG - Invalid package ID format for MongoDB:",l.packageId);let e=E&&b(E)?E:"650420d6359fa3cf64d98d4e",s=b(l.packageId)?l.packageId:"65041bb3359fa3cf64d98d4c",a=new FormData;if(a.append("userId",e),a.append("playerName",l.playerName||"Guest User"),a.append("playerId",l.playerId||"Guest ID"),a.append("packageId",s),a.append("quantity",1),a.append("totalPrice",l.totalPrice),a.append("paymentMethod",k),a.append("status","pending"),l.receipt&&l.receipt.startsWith("data:")){let e=l.receipt.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/);if(e&&3===e.length){let s=e[1],r=e[2],t=atob(r),l=[];for(let e=0;e<t.length;e+=512){let s=t.slice(e,e+512),a=Array(s.length);for(let e=0;e<s.length;e++)a[e]=s.charCodeAt(e);l.push(new Uint8Array(a))}let o=new Blob(l,{type:s}),n=new File([o],"receipt.jpg",{type:s});a.append("recipt",n)}else console.error("ORDER DEBUG - Failed to parse data URL"),a.append("recipt","Data URL parsing failed")}else w?a.append("recipt",w):a.append("recipt","No receipt provided");c.push(n.default.post((0,i.kG)(d.Hz.ENDPOINTS.ORDERS),a,{headers:{Authorization:`Bearer ${p}`}}).then(e=>{if(console.log("ORDER DEBUG - Order saved to MongoDB successfully:",e.data),e.data&&e.data._id){let s={...l,mongoDbId:e.data._id},a=[...JSON.parse(localStorage.getItem("completedOrders")||"[]").filter(e=>e.orderId!==s.orderId),s];localStorage.setItem("completedOrders",JSON.stringify(a))}return{type:"mongoDbSave",success:!0}}).catch(e=>{if(console.error("ORDER DEBUG - Failed to save order to MongoDB:",e),e.response){console.error("ORDER DEBUG - Server response data:",e.response.data),console.error("ORDER DEBUG - Server response status:",e.response.status),console.error("ORDER DEBUG - Server response headers:",e.response.headers);let s=e.response.data.message||"Unknown server error";alert(`MongoDB save error: ${s}. Order saved to local storage as backup.`)}else e.request?(console.error("ORDER DEBUG - No response received:",e.request),alert("Could not reach the server. Order saved to local storage as backup.")):(console.error("ORDER DEBUG - Error message:",e.message),alert(`Error: ${e.message}. Order saved to local storage as backup.`));return{type:"mongoDbSave",success:!1,error:e}}))}else console.error("ORDER DEBUG - No authentication token found");c.push((0,h.it)(m).catch(e=>(console.error("EMAIL DEBUG - Failed to send admin email:",e),{type:"adminEmail",success:!1,error:e}))),c.push((0,u.Mp)(m).catch(e=>(console.error("WHATSAPP DEBUG - Failed to send admin WhatsApp:",e),{type:"adminWhatsapp",success:!1,error:e}))),console.log("ORDER DEBUG - All promises created, calling Promise.all with",c.length,"promises"),Promise.all(c).then(e=>{console.log("ORDER DEBUG - All promises resolved:",e);let s=e.find(e=>e&&"mongoDbSave"===e.type);s&&s.success?console.log("ORDER DEBUG - MongoDB save was successful"):console.warn("ORDER DEBUG - MongoDB save failed, but continuing with localStorage backup"),r(!1),f(!0),setTimeout(()=>{I("/")},5e3)}).catch(e=>{console.error("ORDER DEBUG - Error in promise handling:",e),r(!1),f(!0),setTimeout(()=>{I("/")},5e3)})};try{a.readAsDataURL(w)}catch(e){console.error("ORDER DEBUG - Error reading file:",e),r(!1),alert("Error reading the uploaded file. Please try again with a different file.")}},className:"mt-6",children:[t.jsx("h3",{className:"font-medium text-gray-700 mb-4",children:"Payment Confirmation"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("label",{htmlFor:"payment-slip",className:"block text-sm font-medium text-gray-700 mb-2",children:["Upload ","bank"===k?"Bank":"eZcash"," Payment Slip"]}),(0,t.jsxs)("div",{className:`border-2 border-dashed rounded-lg p-6 text-center ${"bank"===k?"border-blue-300":"border-green-300"}`,children:[t.jsx("input",{type:"file",id:"payment-slip",accept:"image/*,.pdf",onChange:e=>{D(e.target.files[0])},className:"hidden"}),t.jsx("label",{htmlFor:"payment-slip",className:"cursor-pointer block",children:(0,t.jsxs)("div",{className:"text-center",children:["bank"===k?t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}):t.jsx("svg",{className:"mx-auto h-12 w-12 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,t.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Click to select ","bank"===k?"bank slip":"eZcash screenshot"," or drag and drop"]}),t.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, PDF up to 10MB"})]})}),w&&(0,t.jsxs)("div",{className:`mt-4 p-3 rounded-lg flex items-center ${"bank"===k?"bg-blue-50":"bg-green-50"}`,children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 mr-2 ${"bank"===k?"text-blue-500":"text-green-500"}`,viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})}),t.jsx("span",{className:`text-sm ${"bank"===k?"text-blue-700":"text-green-700"}`,children:w.name})]})]}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"bank"===k?"Please upload a screenshot or photo of your bank transfer receipt.":"Please upload a screenshot of your eZcash transaction or confirmation message."})]}),(0,t.jsxs)("div",{className:`${"bank"===k?"bg-blue-50 border-l-4 border-blue-500":"bg-green-50 border-l-4 border-green-500"} p-4 mb-6`,children:[(0,t.jsxs)("p",{className:`${"bank"===k?"text-blue-700":"text-green-700"} text-sm`,children:[t.jsx("strong",{children:"Important:"})," ","bank"===k?"Please ensure your bank reference number is visible in the payment slip to speed up verification.":"Please ensure the eZcash transaction number and timestamp are visible in the screenshot."]}),!1]}),t.jsx("div",{className:"flex justify-center mt-6",children:t.jsx("button",{type:"submit",disabled:!w||a,className:`${!w||a?"bg-gray-400 cursor-not-allowed":"bank"===k?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"} text-white font-bold py-3 px-8 rounded-lg transition-colors flex items-center justify-center`,children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):`Complete Order with ${"bank"===k?"Bank Transfer":"eZcash"}`})})]})]})]}),t.jsx(m.Z,{})]})};r()}catch(e){r(e)}})},2771:(e,s,a)=>{a.d(s,{Cz:()=>r,it:()=>t});let r=e=>new Promise((s,a)=>{try{if(!e.to||!e.subject||!e.body){let s=Error("Missing required email fields (to, subject, body)");throw console.error("Email validation failed:",s,e),s}console.log("EMAIL DEBUG - Sending email to:",e.to),console.log("EMAIL DEBUG - Subject:",e.subject),console.log("EMAIL DEBUG - Body length:",e.body.length,"characters");try{let s=JSON.parse(localStorage.getItem("sentEmails")||"[]");s.push({to:e.to,subject:e.subject,from:e.from||"system@16.170.236.106",timestamp:new Date().toISOString(),status:"sent"}),localStorage.setItem("sentEmails",JSON.stringify(s)),console.log("EMAIL DEBUG - Saved to localStorage successfully")}catch(e){console.error("EMAIL DEBUG - Failed to save to localStorage:",e)}setTimeout(()=>{console.log("EMAIL DEBUG - Email sent successfully to:",e.to),s({success:!0,message:"Email sent successfully"})},1e3)}catch(e){console.error("Email sending failed:",e),a(e)}}),t=e=>{console.log("EMAIL DEBUG - sendOrderNotificationToAdmin called"),console.log("EMAIL DEBUG - Order details:",JSON.stringify(e));let s="admin@16.170.236.106",a=`New Order Received - ${e.orderNumber||e.orderId||"New Order"}`,t=`
    <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
      <div style="background-color: #0e08ab; color: white; padding: 20px; text-align: center;">
        <h1 style="margin: 0;">New Order Received</h1>
      </div>
      
      <div style="padding: 20px; border: 1px solid #ddd; background-color: #f9f9f9;">
        <p>A new order has been received and is ready for processing:</p>
        
        <div style="background-color: #fff; border: 1px solid #eee; padding: 15px; margin: 15px 0;">
          <h2 style="margin-top: 0; color: #0e08ab;">Order Details</h2>
          <p><strong>Order Number:</strong> ${e.orderNumber||e.orderId||"New Order"}</p>
          <p><strong>Date:</strong> ${new Date().toLocaleString()}</p>
          <p><strong>Game:</strong> ${e.gameName||e.game||""}</p>
          <p><strong>Package:</strong> ${e.packageName||""}</p>
          <p><strong>Amount:</strong> ${e.packagePrice||e.totalPrice||""}</p>
          <p><strong>Game ID:</strong> ${e.userId||""}</p>
          <p><strong>Username:</strong> ${e.username||e.playerName||""}</p>
          
          ${e.receiptImage?"<p><strong>Payment Receipt:</strong> Uploaded</p>":""}
          
          <p><strong>Customer Email:</strong> ${e.email||"Not provided"}</p>
          <p><strong>Status:</strong> <span style="color: orange; font-weight: bold;">Pending</span></p>
        </div>
        
        <p>Please log in to the admin dashboard to process this order.</p>
      </div>
      
      <div style="padding: 20px; text-align: center; font-size: 12px; color: #777;">
        <p>This is an automated notification from the SL Gaming Hub system.</p>
        <p>&copy; ${new Date().getFullYear()} SL Gaming Hub. All rights reserved.</p>
      </div>
    </div>
  `;return console.log("EMAIL DEBUG - Prepared admin email to:",s),r({to:s,subject:a,body:t,from:"system@16.170.236.106"})}},1606:(e,s,a)=>{a.d(s,{Mp:()=>l,U3:()=>r,lY:()=>o});let r=e=>new Promise((s,a)=>{try{if(!e.to||!e.message){let s=Error("Missing required WhatsApp fields (to, message)");throw console.error("WhatsApp validation failed:",s,e),s}let a=t(e.to);console.log("WHATSAPP DEBUG - Sending message to:",a),console.log("WHATSAPP DEBUG - Message:",e.message.substring(0,100)+"...");try{let s=JSON.parse(localStorage.getItem("sentWhatsAppMessages")||"[]");s.push({to:a,message:e.message,timestamp:new Date().toISOString(),status:"sent"}),localStorage.setItem("sentWhatsAppMessages",JSON.stringify(s)),console.log("WHATSAPP DEBUG - Saved to localStorage successfully")}catch(e){console.error("WHATSAPP DEBUG - Failed to save to localStorage:",e)}setTimeout(()=>{console.log("WHATSAPP DEBUG - WhatsApp message sent successfully to:",a),s({success:!0,message:"WhatsApp message sent successfully"})},1e3)}catch(e){console.error("WhatsApp sending failed:",e),a(e)}}),t=e=>{let s=e.replace(/\D/g,"");return 9===s.length?s="94"+s:10===s.length&&s.startsWith("0")&&(s="94"+s.substring(1)),s},l=e=>{console.log("WHATSAPP DEBUG - sendOrderNotificationToAdmin called");let s="+94771234567",a=`
*SL GAMING HUB - NEW ORDER ALERT*

A new order has been received and requires processing.

*ORDER INFORMATION*
ðŸ“‹ Order Number: ${e.orderNumber||e.orderId||"New Order"}
ðŸ“† Order Date: ${new Date().toLocaleString()}
â³ Status: Payment Received - Awaiting Processing

*CUSTOMER INFORMATION*
ðŸ‘¤ Customer Name: ${e.username||e.playerName||"Not provided"}
ï¿½ WhatsApp: ${e.phone||"Not provided"}
ðŸ†” Game ID: ${e.userId||"Not provided"}

*PURCHASE DETAILS*
ðŸŽ® Game: ${e.gameName||e.game||""}
ðŸ“¦ Package: ${e.packageName||""}
${e.packageDescription?`ðŸ“ Description: ${e.packageDescription}
`:""}
ï¿½ Amount: ${e.packagePrice||e.totalPrice||""}
ðŸ’³ Payment Method: Bank Transfer
âœ… Payment Status: Received

*REQUIRED ACTIONS*
1. Verify payment details
2. Process the order in the game system
3. Update order status in dashboard
4. Mark as completed when done

Please login to the admin dashboard to process this order:
ðŸŒ Admin URL: http://16.170.236.106/admin/orders

IMPORTANT: This order requires immediate attention.
  `;return console.log("WHATSAPP DEBUG - Prepared admin WhatsApp message to:",s),r({to:s,message:a})},o=(e,s="")=>{let a=t(e),r=encodeURIComponent(s);return`https://wa.me/${a}?text=${r}`}},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},4661:e=>{e.exports=require("react-router-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")},9648:e=>{e.exports=import("axios")}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),r=s.X(0,[682,356,729],()=>a(8149));module.exports=r})();