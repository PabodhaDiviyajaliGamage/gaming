"use strict";(()=>{var e={};e.id=928,e.ids=[928,660],e.modules={1323:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},9703:(e,t,s)=>{s.d(t,{Z:()=>r});let r={src:"/_next/static/media/WhatsApp.23140897.png",height:1850,width:1850,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA00lEQVR42mMAAY+r4YwFG6oZJ7yaKsAABZGPUpkY0IHpPS+tuMeZUQZPXBVA/LCniUwMEx9MZ2JYysCYeC23aPaTBWdXvFrzf9qr2ZeNHrspwXWqn3Cqn3B72v+Dr4/8T7qV+2vhi6X/J7ycOgmuwOqo786JN6b9X/pg5fc1Tzf8Wvx0xf/+J1POM6xnYGMAg3UM2n1Xpvyfd2fR/1UP1/1f+mjl/+gb6ZsZQKD1ag8jiPY5HLU4/0zF/Y5r/cUu50PDXS+EqTJgADOQkQigd9GNEQAb+lzO5L7W1gAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},9913:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>b,default:()=>p,getServerSideProps:()=>x,getStaticPaths:()=>h,getStaticProps:()=>u,reportWebVitals:()=>f,routeModule:()=>A,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>N,unstable_getStaticPaths:()=>v,unstable_getStaticProps:()=>y});var a=s(7093),o=s(5244),l=s(1323),n=s(1682),i=s.n(n),d=s(8141),c=s.n(d),m=s(8471),g=e([m]);m=(g.then?(await g)():g)[0];let p=(0,l.l)(m,"default"),u=(0,l.l)(m,"getStaticProps"),h=(0,l.l)(m,"getStaticPaths"),x=(0,l.l)(m,"getServerSideProps"),b=(0,l.l)(m,"config"),f=(0,l.l)(m,"reportWebVitals"),y=(0,l.l)(m,"unstable_getStaticProps"),v=(0,l.l)(m,"unstable_getStaticPaths"),N=(0,l.l)(m,"unstable_getStaticParams"),j=(0,l.l)(m,"unstable_getServerProps"),w=(0,l.l)(m,"unstable_getServerSideProps"),A=new a.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/Admin_Dashbord/Orders",pathname:"/Admin_Dashbord/Orders",bundlePath:"",filename:""},components:{App:c(),Document:i()},userland:m});r()}catch(e){r(e)}})},8141:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let r=s(167),a=s(997),o=r._(s(6689)),l=s(5782);async function n(e){let{Component:t,ctx:s}=e;return{pageProps:await (0,l.loadGetInitialProps)(t,s)}}class i extends o.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,a.jsx)(e,{...t})}}i.origGetInitialProps=n,i.getInitialProps=n,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},2603:(e,t,s)=>{s.d(t,{Hz:()=>o});let r=process.env.NEXT_PUBLIC_API_URL||"/api",a={auth:{login:`${r}/auth/login`,register:`${r}/auth/register`,logout:`${r}/auth/logout`,verify:`${r}/auth/verify`},users:`${r}/users`,games:`${r}/games`,packages:`${r}/packages`,orders:`${r}/orders`},o={API_BASE_URL:r,API_ENDPOINTS:a,LOGGING_ENABLED:"true"===process.env.VITE_API_LOGGING}},8471:(e,t,s)=>{s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>u});var a=s(997),o=s(6689),l=s(9648),n=s(4661),i=s(2771),d=s(1606),c=s(9703),m=s(8808),g=s(2603),p=e([l]);l=(p.then?(await p)():p)[0];let u=()=>{let[e,t]=(0,o.useState)([]),[s,r]=(0,o.useState)(""),[p,u]=(0,o.useState)(!0),[h,x]=(0,o.useState)(""),[b,f]=(0,o.useState)(null),[y,v]=(0,o.useState)("email"),[N,j]=(0,o.useState)(""),[w,A]=(0,o.useState)(""),[S,I]=(0,o.useState)(!1),[P,k]=(0,o.useState)({success:!1,message:""}),[E,L]=(0,o.useState)(null),[D,C]=(0,o.useState)(!1),{orderId:G}=(0,n.useParams)();(0,o.useEffect)(()=>{u(!0),x(""),(async()=>{try{let e=localStorage.getItem("token");if(e){let s=(await l.default.get((0,m.kG)("/api/order"),{headers:{Authorization:`Bearer ${e}`}})).data.map(e=>{let t=e.userId||{},s=e.packageId||{},r=s.gameId||{};return{orderId:e._id,orderNumber:e._id.substring(0,8),game:r.gamename||"Unknown Game",userId:e.userId?._id||e.userId,playerName:e.playerName,playerId:e.playerId,packageId:e.packageId?._id||e.packageId,packageName:s.packagename||"Unknown Package",totalPrice:e.totalPrice,date:new Date(e.date).toLocaleString(),receiptImage:e.recipt,status:e.status,email:t.email||e.email,phone:t.phone||e.phone,mongoDbId:e._id}});t(s)}else t([]),x("Authentication required. Please log in to view orders.");u(!1)}catch(e){console.error("Error fetching orders:",e),t([]),x("Failed to load orders from server. Please try again later."),u(!1)}})()},[G]);let M=e.filter(e=>Object.values(e).some(e=>String(e).toLowerCase().includes(s.toLowerCase()))),U=(s,r,a)=>{if(a===r)return;let o=e.map(e=>e.orderId===s?{...e,status:r}:e);t(o);let n=localStorage.getItem("token");n&&l.default.patch(`${(0,m.kG)("/api/order/status")}/${s}`,{status:r},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}}).then(e=>{console.log("Status updated on server:",e.data),"completed"===r&&(k({success:!0,message:"Order marked as completed. A confirmation email has been sent to the customer."}),setTimeout(()=>{k({success:!1,message:""})},5e3))}).catch(e=>{console.error("Error updating status on server:",e),x("Failed to update order status on server. Please try again."),setTimeout(()=>x(""),3e3)})},O=(e,t="email")=>{f(e),v(t),"email"===t?(j(`Update on your order ${e.orderNumber||e.orderId}`),A(`Dear ${e.playerName||"Customer"},

Your order for ${e.packageName} in ${e.game} has been processed. Your account with Player ID ${e.playerId||"[Player ID]"} will be credited within the next few hours.

Thank you for choosing SL Gaming Hub!

Best regards,
SL Gaming Hub Team`)):A(`*Update on your SL Gaming Hub order*

Dear ${e.playerName||"Customer"},

Your order for ${e.packageName} in ${e.game} has been processed. Your account with Player ID *${e.playerId||"[Player ID]"}* will be credited within the next few hours.

Thank you for choosing SL Gaming Hub!

Best regards,
SL Gaming Hub Team`)},R=e=>{if(!e||!e.phone)return"#";let t=`Hello! I'm from SL Gaming Hub regarding your order ${e.orderNumber||e.orderId}. How can I help you?`;return(0,d.lY)(e.phone,t)},$=e=>{let t=e.recipt||e.receiptImage;if(!t){alert("No receipt image available for this order.");return}let s=g.Hz.BASE_URL.replace("/api","");t.startsWith("http")?console.log("Using existing full URL:",t):t.startsWith("/uploads/")?(console.log("Converting /uploads/ path to full URL"),t=`${s}${t}`):t.startsWith("data:")?console.log("Using data URL as is"):(console.log("Treating as a filename, adding full path"),t=`${s}/uploads/${t}`),console.log("Displaying receipt image:",t),L(t),C(!0)},T=async s=>{if(s.preventDefault(),!b){k({success:!1,message:"No order selected"});return}if("email"===y&&!b.email){k({success:!1,message:"No email address found for this customer"});return}if("whatsapp"===y&&!b.phone){k({success:!1,message:"No phone number found for this customer"});return}I(!0),k({success:!1,message:""});try{if("email"===y){await (0,i.Cz)({to:b.email,subject:N,body:w,from:"orders@16.170.236.106"});let s=e.map(e=>e.orderId===b.orderId?{...e,emailsSent:[...e.emailsSent||[],{subject:N,timestamp:new Date().toISOString()}]}:e);t(s),localStorage.setItem("completedOrders",JSON.stringify(s)),k({success:!0,message:`Email sent successfully to ${b.email}`})}else{await (0,d.U3)({to:b.phone,message:w});let s=e.map(e=>e.orderId===b.orderId?{...e,whatsappSent:[...e.whatsappSent||[],{timestamp:new Date().toISOString()}]}:e);t(s),localStorage.setItem("completedOrders",JSON.stringify(s)),k({success:!0,message:`WhatsApp message sent successfully to ${b.phone}`})}setTimeout(()=>{f(null)},2e3)}catch(e){k({success:!1,message:`Failed to send ${y}: ${e.message}`})}finally{I(!1)}};return(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"Orders"}),a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 text-blue-700 p-4 mb-4 rounded",children:(0,a.jsxs)("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-blue-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm",children:"This page now shows only server-stored orders. Locally stored orders are no longer displayed."})})]})}),a.jsx("input",{type:"text",placeholder:"Search by Order ID, User, Player...",value:s,onChange:e=>r(e.target.value),className:"border p-2 mb-4 w-full sm:w-[300px] rounded"}),p?a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{children:"Loading orders..."})}):h?a.jsx("div",{className:"text-center py-4 text-red-500",children:a.jsx("p",{children:h})}):0===M.length?a.jsx("p",{children:"No orders found."}):a.jsx("div",{className:"grid gap-4",children:M.map((s,r)=>(0,a.jsxs)("div",{className:"bg-gray-100 rounded shadow p-4 flex flex-col sm:flex-row sm:items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsxs)("div",{className:"font-bold text-lg mb-2",children:["Order ID: ",s.orderNumber||s.orderId]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:["Game: ",s.game]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:["User ID: ",s.userId]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:["Player Name: ",s.playerName]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:["Player ID: ",s.playerId]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:["Package Name: ",s.packageName]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:["Total Price: ",s.totalPrice]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:["Date: ",s.date]}),s.email&&(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Customer Email:"})," ",s.email]}),s.phone&&(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Customer Phone:"})," ",s.phone,(0,a.jsxs)("a",{href:R(s),target:"_blank",rel:"noopener noreferrer",className:"ml-2 inline-flex items-center text-green-600 hover:text-green-700",children:[a.jsx("img",{src:c.Z,alt:"WhatsApp",className:"h-4 w-4"}),a.jsx("span",{className:"ml-1 text-xs",children:"Chat"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Status:"}),(0,a.jsxs)("select",{value:s.status||"pending",onChange:e=>U(s.orderId,e.target.value,s.status),className:"ml-2 px-2 py-1 border rounded",children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"processing",children:"Processing"}),a.jsx("option",{value:"completed",children:"Completed"}),a.jsx("option",{value:"canceled",children:"Canceled"}),a.jsx("option",{value:"rejected",children:"Rejected"})]}),s.mongoDbId&&(0,a.jsxs)("span",{className:"ml-2 text-xs text-blue-500",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Server synced"]})]}),s.emailsSent&&s.emailsSent.length>0&&(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Emails Sent:"})," ",s.emailsSent.length,(0,a.jsxs)("ul",{className:"text-xs ml-4",children:[s.emailsSent.slice(0,2).map((e,t)=>(0,a.jsxs)("li",{className:"italic",children:[new Date(e.timestamp).toLocaleString(),': "',e.subject,'"']},t)),s.emailsSent.length>2&&a.jsx("li",{children:"..."})]})]}),s.whatsappSent&&s.whatsappSent.length>0&&(0,a.jsxs)("div",{className:"text-sm text-gray-700 mb-1",children:[a.jsx("span",{className:"font-medium",children:"WhatsApp Sent:"})," ",s.whatsappSent.length,(0,a.jsxs)("ul",{className:"text-xs ml-4",children:[s.whatsappSent.slice(0,2).map((e,t)=>a.jsx("li",{className:"italic",children:new Date(e.timestamp).toLocaleString()},t)),s.whatsappSent.length>2&&a.jsx("li",{children:"..."})]})]})]}),(0,a.jsxs)("div",{className:"sm:ml-4 mt-4 sm:mt-0 flex flex-col gap-2",children:[s.email&&(0,a.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm flex items-center justify-center",onClick:()=>O(s,"email"),children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send Email"]}),s.phone&&(0,a.jsxs)("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm flex items-center justify-center",onClick:()=>O(s,"whatsapp"),children:[a.jsx("img",{src:c.Z,alt:"WhatsApp",className:"h-4 w-4 mr-1"}),"Send WhatsApp"]}),(s.receiptImage||s.recipt)&&(0,a.jsxs)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded text-sm flex items-center justify-center",onClick:()=>$(s),children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"View Receipt"]}),a.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded text-sm",onClick:()=>{if(window.confirm("Are you sure you want to delete this order?")){t(e.filter(e=>e.orderId!==s.orderId));let r=localStorage.getItem("token");r&&l.default.delete(`${(0,m.kG)("/api/order")}/${s.orderId}`,{headers:{Authorization:`Bearer ${r}`}}).then(e=>{console.log("Order deleted from server:",e.data)}).catch(e=>{console.error("Error deleting order from server:",e),x("Failed to delete order from server. Please try again."),setTimeout(()=>x(""),3e3)})}},children:"Delete"})]})]},s.orderId||r))}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold",children:"email"===y?"Send Email to Customer":"Send WhatsApp to Customer"}),a.jsx("button",{onClick:()=>f(null),className:"text-gray-500 hover:text-gray-700",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex mb-3",children:[(0,a.jsxs)("button",{onClick:()=>v("email"),className:`flex-1 py-2 flex items-center justify-center ${"email"===y?"bg-blue-100 border-b-2 border-blue-500 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]}),(0,a.jsxs)("button",{onClick:()=>v("whatsapp"),className:`flex-1 py-2 flex items-center justify-center ${"whatsapp"===y?"bg-green-100 border-b-2 border-green-500 text-green-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx("img",{src:c.Z,alt:"WhatsApp",className:"h-5 w-5 mr-1"}),"WhatsApp"]})]}),"email"===y?(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"To:"})," ",b.email||"No email available"]}):(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"To:"})," ",b.phone||"No phone number available"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Customer:"})," ",b.playerName||"N/A"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Player ID:"})," ",b.playerId||"N/A"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Order:"})," ",b.orderNumber||b.orderId]})]}),(0,a.jsxs)("form",{onSubmit:T,children:["email"===y&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"emailSubject",className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),a.jsx("input",{type:"text",id:"emailSubject",value:N,onChange:e=>j(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{htmlFor:"messageBody",className:"block text-sm font-medium text-gray-700",children:"Message"}),(0,a.jsxs)("select",{className:"text-xs border border-gray-300 rounded px-2 py-1",onChange:e=>{if(e.target.value){let t=e.target.value.replace("[PLAYER_NAME]",b.playerName||"Customer").replace("[PLAYER_ID]",b.playerId||"Unknown").replace("[ORDER_ID]",b.orderNumber||b.orderId).replace("[GAME]",b.game||"your game").replace("[PACKAGE]",b.packageName||"your package");A(t)}},children:[a.jsx("option",{value:"",children:"Select Template"}),a.jsx("option",{value:"Dear [PLAYER_NAME],\\n\\nWe're following up on your order #[ORDER_ID].\\n\\nWe notice your Player ID is [PLAYER_ID]. Is this correct?\\n\\nThank you,\\nSL Gaming Hub Team",children:"Player ID Confirmation"}),a.jsx("option",{value:"Dear [PLAYER_NAME],\\n\\nYour order #[ORDER_ID] has been completed and credited to your account with Player ID [PLAYER_ID].\\n\\nThank you for your purchase!\\n\\nSL Gaming Hub Team",children:"Order Completion"}),a.jsx("option",{value:"Dear [PLAYER_NAME],\\n\\nWe need additional information for your [GAME] order #[ORDER_ID].\\n\\nCould you please confirm your Player ID: [PLAYER_ID]?\\n\\nThank you,\\nSL Gaming Hub Team",children:"Request Player ID Confirmation"})]})]}),a.jsx("textarea",{id:"messageBody",value:w,onChange:e=>A(e.target.value),className:"w-full border border-gray-300 rounded px-3 py-2 h-40",required:!0}),"whatsapp"===y&&(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[a.jsx("strong",{children:"Tip:"})," Use *asterisks* for bold text, _underscores_ for italic text"]})]}),P.message&&a.jsx("div",{className:`mb-4 p-3 rounded ${P.success?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:P.message}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>f(null),className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:`px-4 py-2 ${"email"===y?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"} text-white rounded flex items-center`,disabled:S||"email"===y&&!b.email||"whatsapp"===y&&!b.phone,children:S?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"email"===y?(0,a.jsxs)(a.Fragment,{children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Send Email"]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("img",{src:c.Z,alt:"WhatsApp",className:"h-4 w-4 mr-1"}),"Send WhatsApp"]})})]})]})]})}),D&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-2xl",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-xl font-bold",children:"Bank Receipt"}),a.jsx("button",{onClick:()=>C(!1),className:"text-gray-500 hover:text-gray-700",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(void 0).DEV&&(0,a.jsxs)("div",{className:"mb-4 p-2 bg-gray-100 rounded text-xs overflow-auto max-h-20",children:[a.jsx("strong",{children:"Image URL:"})," ",E]}),a.jsx("div",{className:"flex justify-center",children:E?(0,a.jsxs)("div",{className:"relative",children:[a.jsx("img",{src:E,alt:"Bank Receipt",className:"max-w-full max-h-[70vh] object-contain",onError:e=>{console.error("Failed to load image:",E),e.target.onerror=null,e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9IiNFNUU3RUIiLz48cGF0aCBkPSJNNDAgNTBINjBNNTAgNDBWNjAiIHN0cm9rZT0iIzZCN0NCRCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48L3N2Zz4=";let t=E.includes("/api/")?E.replace("/api/","/"):E.replace("/uploads/","/api/uploads/");if(t!==E){console.log("Trying alternative URL:",t);let s=new Image;s.onload=()=>{console.log("Alternative URL worked, updating image"),e.target.src=t},s.onerror=()=>{console.error("Alternative URL also failed"),alert("Error loading the receipt image. The image might be corrupted or unavailable.")},s.src=t}else alert("Error loading the receipt image. The image might be corrupted or unavailable.")}}),(0,a.jsxs)("div",{className:"absolute bottom-2 right-2 flex gap-2",children:[(0,a.jsxs)("a",{href:E,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-full text-xs flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Open Original"]}),(0,a.jsxs)("a",{href:E,download:"bank-receipt.jpg",className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-full text-xs flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]})]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-10 border-2 border-dashed border-gray-300 rounded-lg",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),a.jsx("p",{className:"text-gray-500",children:"Receipt image could not be loaded"})]})}),(0,a.jsxs)("div",{className:"mt-4 flex justify-center space-x-3",children:[a.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded",children:"Close"}),E&&(0,a.jsxs)("a",{href:E,download:"receipt.jpg",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]})]})]})})]})};r()}catch(e){r(e)}})},8808:(e,t,s)=>{s.d(t,{NU:()=>o,kG:()=>a});let r=process.env.NEXT_PUBLIC_API_URL||"/api",a=e=>{let t=e.startsWith("/")?e.slice(1):e;return`${r}/${t}`},o=e=>{let t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t}},2771:(e,t,s)=>{s.d(t,{Cz:()=>r,it:()=>a});let r=e=>new Promise((t,s)=>{try{if(!e.to||!e.subject||!e.body){let t=Error("Missing required email fields (to, subject, body)");throw console.error("Email validation failed:",t,e),t}console.log("EMAIL DEBUG - Sending email to:",e.to),console.log("EMAIL DEBUG - Subject:",e.subject),console.log("EMAIL DEBUG - Body length:",e.body.length,"characters");try{let t=JSON.parse(localStorage.getItem("sentEmails")||"[]");t.push({to:e.to,subject:e.subject,from:e.from||"system@16.170.236.106",timestamp:new Date().toISOString(),status:"sent"}),localStorage.setItem("sentEmails",JSON.stringify(t)),console.log("EMAIL DEBUG - Saved to localStorage successfully")}catch(e){console.error("EMAIL DEBUG - Failed to save to localStorage:",e)}setTimeout(()=>{console.log("EMAIL DEBUG - Email sent successfully to:",e.to),t({success:!0,message:"Email sent successfully"})},1e3)}catch(e){console.error("Email sending failed:",e),s(e)}}),a=e=>{console.log("EMAIL DEBUG - sendOrderNotificationToAdmin called"),console.log("EMAIL DEBUG - Order details:",JSON.stringify(e));let t="admin@16.170.236.106",s=`New Order Received - ${e.orderNumber||e.orderId||"New Order"}`,a=`
    <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
      <div style="background-color: #0e08ab; color: white; padding: 20px; text-align: center;">
        <h1 style="margin: 0;">New Order Received</h1>
      </div>
      
      <div style="padding: 20px; border: 1px solid #ddd; background-color: #f9f9f9;">
        <p>A new order has been received and is ready for processing:</p>
        
        <div style="background-color: #fff; border: 1px solid #eee; padding: 15px; margin: 15px 0;">
          <h2 style="margin-top: 0; color: #0e08ab;">Order Details</h2>
          <p><strong>Order Number:</strong> ${e.orderNumber||e.orderId||"New Order"}</p>
          <p><strong>Date:</strong> ${new Date().toLocaleString()}</p>
          <p><strong>Game:</strong> ${e.gameName||e.game||""}</p>
          <p><strong>Package:</strong> ${e.packageName||""}</p>
          <p><strong>Amount:</strong> ${e.packagePrice||e.totalPrice||""}</p>
          <p><strong>Game ID:</strong> ${e.userId||""}</p>
          <p><strong>Username:</strong> ${e.username||e.playerName||""}</p>
          
          ${e.receiptImage?"<p><strong>Payment Receipt:</strong> Uploaded</p>":""}
          
          <p><strong>Customer Email:</strong> ${e.email||"Not provided"}</p>
          <p><strong>Status:</strong> <span style="color: orange; font-weight: bold;">Pending</span></p>
        </div>
        
        <p>Please log in to the admin dashboard to process this order.</p>
      </div>
      
      <div style="padding: 20px; text-align: center; font-size: 12px; color: #777;">
        <p>This is an automated notification from the SL Gaming Hub system.</p>
        <p>&copy; ${new Date().getFullYear()} SL Gaming Hub. All rights reserved.</p>
      </div>
    </div>
  `;return console.log("EMAIL DEBUG - Prepared admin email to:",t),r({to:t,subject:s,body:a,from:"system@16.170.236.106"})}},1606:(e,t,s)=>{s.d(t,{Mp:()=>o,U3:()=>r,lY:()=>l});let r=e=>new Promise((t,s)=>{try{if(!e.to||!e.message){let t=Error("Missing required WhatsApp fields (to, message)");throw console.error("WhatsApp validation failed:",t,e),t}let s=a(e.to);console.log("WHATSAPP DEBUG - Sending message to:",s),console.log("WHATSAPP DEBUG - Message:",e.message.substring(0,100)+"...");try{let t=JSON.parse(localStorage.getItem("sentWhatsAppMessages")||"[]");t.push({to:s,message:e.message,timestamp:new Date().toISOString(),status:"sent"}),localStorage.setItem("sentWhatsAppMessages",JSON.stringify(t)),console.log("WHATSAPP DEBUG - Saved to localStorage successfully")}catch(e){console.error("WHATSAPP DEBUG - Failed to save to localStorage:",e)}setTimeout(()=>{console.log("WHATSAPP DEBUG - WhatsApp message sent successfully to:",s),t({success:!0,message:"WhatsApp message sent successfully"})},1e3)}catch(e){console.error("WhatsApp sending failed:",e),s(e)}}),a=e=>{let t=e.replace(/\D/g,"");return 9===t.length?t="94"+t:10===t.length&&t.startsWith("0")&&(t="94"+t.substring(1)),t},o=e=>{console.log("WHATSAPP DEBUG - sendOrderNotificationToAdmin called");let t="+94771234567",s=`
*SL GAMING HUB - NEW ORDER ALERT*

A new order has been received and requires processing.

*ORDER INFORMATION*
ðŸ“‹ Order Number: ${e.orderNumber||e.orderId||"New Order"}
ðŸ“† Order Date: ${new Date().toLocaleString()}
â³ Status: Payment Received - Awaiting Processing

*CUSTOMER INFORMATION*
ðŸ‘¤ Customer Name: ${e.username||e.playerName||"Not provided"}
ï¿½ WhatsApp: ${e.phone||"Not provided"}
ðŸ†” Game ID: ${e.userId||"Not provided"}

*PURCHASE DETAILS*
ðŸŽ® Game: ${e.gameName||e.game||""}
ðŸ“¦ Package: ${e.packageName||""}
${e.packageDescription?`ðŸ“ Description: ${e.packageDescription}
`:""}
ï¿½ Amount: ${e.packagePrice||e.totalPrice||""}
ðŸ’³ Payment Method: Bank Transfer
âœ… Payment Status: Received

*REQUIRED ACTIONS*
1. Verify payment details
2. Process the order in the game system
3. Update order status in dashboard
4. Mark as completed when done

Please login to the admin dashboard to process this order:
ðŸŒ Admin URL: http://16.170.236.106/admin/orders

IMPORTANT: This order requires immediate attention.
  `;return console.log("WHATSAPP DEBUG - Prepared admin WhatsApp message to:",t),r({to:t,message:s})},l=(e,t="")=>{let s=a(e),r=encodeURIComponent(t);return`https://wa.me/${s}?text=${r}`}},5244:(e,t)=>{var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},4661:e=>{e.exports=require("react-router-dom")},997:e=>{e.exports=require("react/jsx-runtime")},5315:e=>{e.exports=require("path")},9648:e=>{e.exports=import("axios")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[682],()=>s(9913));module.exports=r})();