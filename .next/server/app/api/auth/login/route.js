"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4508:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>f,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{POST:()=>d});var a=r(9303),o=r(8716),s=r(670),i=r(7070),u=r(5285),p=r(3077);async function d(e){try{await (0,u.Z)();let{email:t,password:r}=await e.json(),n=await p.Z.findOne({email:t});if(!n||n.password!==r)return i.NextResponse.json({success:!1,error:"Invalid credentials"},{status:401});let a=n.toObject();return delete a.password,i.NextResponse.json({success:!0,data:a})}catch(e){return i.NextResponse.json({success:!1,error:e.message},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"C:\\Users\\pabod\\Desktop\\SlGamingHub-frontend\\app\\api\\auth\\login\\route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:g}=l,h="/api/auth/login/route";function f(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},5285:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(1185),a=r.n(n);let o=process.env.MONGODB_URI;if(!o)throw Error("Please define the MONGODB_URI environment variable inside .env");let s=global.mongoose;s||(s=global.mongoose={conn:null,promise:null});let i=async function(){if(s.conn)return s.conn;s.promise||(s.promise=a().connect(o,{bufferCommands:!1}).then(e=>e));try{s.conn=await s.promise}catch(e){throw s.promise=null,e}return s.conn}},3077:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(1185),a=r.n(n);let o=new(a()).Schema({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0},password:{type:String,required:!0},phone:{type:String,default:""},role:{type:String,enum:["user","admin"],default:"user"},status:{type:String,enum:["active","inactive"],default:"active"},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}});o.pre("save",function(e){this.updatedAt=Date.now(),e()});let s=a().models.User||a().model("User",o)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,972],()=>r(4508));module.exports=n})();