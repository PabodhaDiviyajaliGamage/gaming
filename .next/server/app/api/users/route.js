"use strict";(()=>{var e={};e.id=701,e.ids=[701],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1160:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>d});var n=r(9303),a=r(8716),o=r(670),i=r(7070),u=r(5285),p=r(3077);async function c(){try{await (0,u.Z)();let e=await p.Z.find({}).sort({createdAt:-1}).select("-password");return i.NextResponse.json({success:!0,data:e})}catch(e){return i.NextResponse.json({success:!1,error:e.message},{status:500})}}async function d(e){try{await (0,u.Z)();let t=await e.json();if(await p.Z.findOne({email:t.email}))return i.NextResponse.json({success:!1,error:"User already exists"},{status:400});let r=(await p.Z.create(t)).toObject();return delete r.password,i.NextResponse.json({success:!0,data:r},{status:201})}catch(e){return i.NextResponse.json({success:!1,error:e.message},{status:400})}}let l=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/users/route",pathname:"/api/users",filename:"route",bundlePath:"app/api/users/route"},resolvedPagePath:"C:\\Users\\pabod\\Desktop\\SlGamingHub-frontend\\app\\api\\users\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:g}=l,v="/api/users/route";function h(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}},5285:(e,t,r)=>{r.d(t,{Z:()=>i});var s=r(1185),n=r.n(s);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env");let o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let i=async function(){if(o.conn)return o.conn;o.promise||(o.promise=n().connect(a,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}},3077:(e,t,r)=>{r.d(t,{Z:()=>o});var s=r(1185),n=r.n(s);let a=new(n()).Schema({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0},password:{type:String,required:!0},phone:{type:String,default:""},role:{type:String,enum:["user","admin"],default:"user"},status:{type:String,enum:["active","inactive"],default:"active"},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}});a.pre("save",function(e){this.updatedAt=Date.now(),e()});let o=n().models.User||n().model("User",a)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,972],()=>r(1160));module.exports=s})();