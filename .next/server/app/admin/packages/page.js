(()=>{var e={};e.id=181,e.ids=[181],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8691:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>g,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o}),t(2670),t(774),t(7139),t(5866);var s=t(3191),r=t(8716),l=t(7922),n=t.n(l),i=t(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(a,d);let o=["",{children:["admin",{children:["packages",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2670)),"C:\\Users\\pabod\\Desktop\\SlGamingHub-frontend\\app\\admin\\packages\\page.jsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,774)),"C:\\Users\\pabod\\Desktop\\SlGamingHub-frontend\\app\\admin\\layout.jsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,7139)),"C:\\Users\\pabod\\Desktop\\SlGamingHub-frontend\\app\\layout.jsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\pabod\\Desktop\\SlGamingHub-frontend\\app\\admin\\packages\\page.jsx"],m="/admin/packages/page",g={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/packages/page",pathname:"/admin/packages",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},2384:(e,a,t)=>{Promise.resolve().then(t.bind(t,213))},497:(e,a,t)=>{Promise.resolve().then(t.bind(t,3532))},6570:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},8341:()=>{},213:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var s=t(326),r=t(7577),l=t(7389),n=t(434);function i({children:e}){let[a,t]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!0),o=(0,l.useRouter)();return i?s.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Loading..."})}):a?s.jsx("div",{className:"min-h-screen bg-gray-900",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)("aside",{className:"w-64 bg-gray-800 min-h-screen p-4",children:[(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-white text-xl font-bold mb-2",children:"Admin Panel"}),s.jsx("p",{className:"text-gray-400 text-sm",children:localStorage.getItem("userName")})]}),(0,s.jsxs)("nav",{className:"space-y-2",children:[s.jsx(n.default,{href:"/admin/orders",className:"block text-white hover:bg-gray-700 p-3 rounded transition",children:"\uD83D\uDCE6 Orders"}),s.jsx(n.default,{href:"/admin/games",className:"block text-white hover:bg-gray-700 p-3 rounded transition",children:"\uD83C\uDFAE Games"}),s.jsx(n.default,{href:"/admin/packages",className:"block text-white hover:bg-gray-700 p-3 rounded transition",children:"\uD83D\uDCE6 Packages"}),s.jsx(n.default,{href:"/admin/users",className:"block text-white hover:bg-gray-700 p-3 rounded transition",children:"\uD83D\uDC65 Users"}),s.jsx(n.default,{href:"/admin/bank-details",className:"block text-white hover:bg-gray-700 p-3 rounded transition",children:"\uD83C\uDFE6 Bank Details"}),s.jsx(n.default,{href:"/admin/banner",className:"block text-white hover:bg-gray-700 p-3 rounded transition",children:"\uD83D\uDDBCï¸ Header Banner"}),s.jsx("hr",{className:"border-gray-700 my-4"}),s.jsx(n.default,{href:"/",className:"block text-blue-400 hover:bg-gray-700 p-3 rounded transition",children:"\uD83C\uDFE0 Back to Home"}),s.jsx("button",{onClick:()=>{localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userName"),localStorage.removeItem("userRole"),o.push("/")},className:"w-full text-left text-red-400 hover:bg-gray-700 p-3 rounded transition",children:"\uD83D\uDEAA Logout"})]})]}),s.jsx("main",{className:"flex-1 p-8",children:e})]})}):null}},3532:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n});var s=t(326),r=t(7577),l=t(9420);function n(){let[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)([]),[i,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[m,g]=(0,r.useState)("all"),[u,x]=(0,r.useState)(!1),[p,h]=(0,r.useState)({gameId:"",gameName:"",amount:"",price:"",image:"",popular:!1,status:"active"}),b=async()=>{try{x(!0);let e=await l.Pc.getAll();a(e.data||[])}catch(e){console.error("Error loading packages:",e),alert("Failed to load packages: "+e.message)}finally{x(!1)}},f=e=>{c(e),h(e),d(!0)},y=async e=>{if(confirm("Are you sure you want to delete this package?"))try{x(!0),await l.Pc.delete(e),alert("Package deleted successfully!"),b()}catch(e){console.error("Error deleting package:",e),alert("Failed to delete package: "+e.message)}finally{x(!1)}},j=async e=>{e.preventDefault();try{x(!0),o?(await l.Pc.update(o._id,p),alert("Package updated successfully!")):(await l.Pc.create(p),alert("Package added successfully!")),d(!1),b()}catch(e){console.error("Error saving package:",e),alert("Failed to save package: "+e.message)}finally{x(!1)}};e.reduce((e,a)=>{let t=a.gameName||a.game;return e[t]||(e[t]=[]),e[t].push(a),e},{});let v=("all"===m?e:e.filter(e=>(e.gameName||e.game)===m)).reduce((e,a)=>{let t=a.gameName||a.game;return e[t]||(e[t]=[]),e[t].push(a),e},{}),N=[...new Set(e.map(e=>e.gameName||e.game))];return(0,s.jsxs)("div",{className:"text-white flex gap-6",children:[(0,s.jsxs)("div",{className:"w-64 bg-gray-800 rounded-lg p-6 h-fit sticky top-6",children:[s.jsx("button",{onClick:()=>{c(null),h({gameId:"",gameName:"",amount:"",price:"",image:"",popular:!1,status:"active"}),d(!0)},className:"w-full px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-semibold transition mb-6",children:"+ Add New Package"}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-3",children:"FILTER BY GAME"}),(0,s.jsxs)("button",{onClick:()=>g("all"),className:`w-full text-left px-4 py-2 rounded-lg transition ${"all"===m?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:["All Games (",e.length,")"]}),N.map(a=>(0,s.jsxs)("button",{onClick:()=>g(a),className:`w-full text-left px-4 py-2 rounded-lg transition ${m===a?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600"}`,children:[a," (",e.filter(e=>(e.gameName||e.game)===a).length,")"]},a))]})]}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Packages Management"}),0===Object.keys(v).length?s.jsx("div",{className:"bg-gray-800 rounded-lg p-8 text-center text-gray-400",children:'No packages found. Click "Add New Package" to create one.'}):Object.entries(v).map(([e,a])=>(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-yellow-400",children:e}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map(e=>(0,s.jsxs)("div",{className:`bg-gray-800 border-2 ${e.popular?"border-yellow-500":"border-gray-700"} rounded-lg p-6 relative`,children:[e.popular&&s.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 bg-yellow-500 text-black text-xs font-bold px-3 py-1 rounded-full",children:"POPULAR"}),(0,s.jsxs)("div",{className:"text-center mb-4",children:[e.image?s.jsx("img",{src:e.image,alt:e.amount||e.name,className:"w-24 h-24 mx-auto mb-3 object-contain rounded-lg"}):s.jsx("div",{className:"w-24 h-24 mx-auto mb-3 bg-gray-700 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-gray-500 text-sm",children:"No Image"})}),s.jsx("h3",{className:"text-xl font-bold mb-1",children:e.amount||e.name}),s.jsx("p",{className:"text-2xl font-bold text-yellow-400 mt-2",children:e.price})]}),s.jsx("div",{className:"mb-3",children:s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${"active"===e.status?"bg-green-500":"bg-red-500"}`,children:e.status.toUpperCase()})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>f(e),className:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm transition",disabled:u,children:"Edit"}),s.jsx("button",{onClick:()=>y(e._id||e.id),className:"flex-1 px-3 py-2 bg-red-600 hover:bg-red-700 rounded text-sm transition",disabled:u,children:"Delete"})]})]},e._id||e.id))})]},e))]}),i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl max-w-md w-full p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:o?"Edit Package":"Add New Package"}),(0,s.jsxs)("form",{onSubmit:j,children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Game *"}),(0,s.jsxs)("select",{value:p.gameId,onChange:e=>{let a=t.find(a=>a._id===e.target.value);h({...p,gameId:e.target.value,gameName:a?a.name:""})},className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600",required:!0,children:[s.jsx("option",{value:"",children:"Select Game"}),t.map(e=>s.jsx("option",{value:e._id,children:e.name},e._id))]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Package Amount *"}),s.jsx("input",{type:"text",value:p.amount,onChange:e=>h({...p,amount:e.target.value}),className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600",placeholder:"e.g., 310 Diamonds",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price *"}),s.jsx("input",{type:"text",value:p.price,onChange:e=>h({...p,price:e.target.value}),className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600",placeholder:"e.g., LKR 500",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Package Image *"}),s.jsx("input",{type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:e=>{let a=e.target.files[0];if(a){let e=new FileReader;e.onloadend=()=>{h({...p,image:e.result})},e.readAsDataURL(a)}},className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600 text-sm file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700",required:!p.image}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Upload PNG, JPG, or WebP image (recommended: 256x256px)"}),p.image&&(0,s.jsxs)("div",{className:"mt-2 p-2 bg-gray-700 rounded",children:[s.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Preview:"}),s.jsx("img",{src:p.image,alt:"Preview",className:"w-16 h-16 object-contain rounded"}),s.jsx("button",{type:"button",onClick:()=>h({...p,image:""}),className:"text-xs text-red-400 mt-1 hover:text-red-300",children:"Remove Image"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"popular",checked:p.popular,onChange:e=>h({...p,popular:e.target.checked}),className:"w-4 h-4"}),s.jsx("label",{htmlFor:"popular",className:"text-sm font-medium",children:"Mark as Popular"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status *"}),(0,s.jsxs)("select",{value:p.status,onChange:e=>h({...p,status:e.target.value}),className:"w-full px-4 py-2 rounded bg-gray-700 border border-gray-600",required:!0,children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-semibold transition",children:o?"Update":"Add"}),s.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-semibold transition",children:"Cancel"})]})]})]})})]})}},9420:(e,a,t)=>{"use strict";async function s(e,a={}){let t=await fetch(`/api${e}`,{headers:{"Content-Type":"application/json",...a.headers},...a}),s=await t.json();if(!t.ok)throw Error(s.error||"API request failed");return s}t.d(a,{Pc:()=>l,_W:()=>r,g3:()=>n,h3:()=>i});let r={getAll:()=>s("/games"),getById:e=>s(`/games/${e}`),create:e=>s("/games",{method:"POST",body:JSON.stringify(e)}),update:(e,a)=>s(`/games/${e}`,{method:"PUT",body:JSON.stringify(a)}),delete:e=>s(`/games/${e}`,{method:"DELETE"})},l={getAll:()=>s("/packages"),getById:e=>s(`/packages/${e}`),create:e=>s("/packages",{method:"POST",body:JSON.stringify(e)}),update:(e,a)=>s(`/packages/${e}`,{method:"PUT",body:JSON.stringify(a)}),delete:e=>s(`/packages/${e}`,{method:"DELETE"})},n={getAll:()=>s("/orders"),getById:e=>s(`/orders/${e}`),create:e=>s("/orders",{method:"POST",body:JSON.stringify(e)}),update:(e,a)=>s(`/orders/${e}`,{method:"PUT",body:JSON.stringify(a)}),delete:e=>s(`/orders/${e}`,{method:"DELETE"})},i={getAll:()=>s("/users"),register:e=>s("/users",{method:"POST",body:JSON.stringify(e)}),update:(e,a)=>s(`/users/${e}`,{method:"PUT",body:JSON.stringify(a)}),delete:e=>s(`/users/${e}`,{method:"DELETE"}),login:e=>s("/auth/login",{method:"POST",body:JSON.stringify(e)})}},774:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(8570).createProxy)(String.raw`C:\Users\pabod\Desktop\SlGamingHub-frontend\app\admin\layout.jsx#default`)},2670:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(8570).createProxy)(String.raw`C:\Users\pabod\Desktop\SlGamingHub-frontend\app\admin\packages\page.jsx#default`)},7139:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i,metadata:()=>n});var s=t(9510),r=t(2584),l=t.n(r);t(7272);let n={title:"SL Gaming Hub",description:"Gaming top-up platform"};function i({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:l().className,children:e})})}},7272:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[276,953,434],()=>t(8691));module.exports=s})();